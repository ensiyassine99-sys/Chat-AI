2025-10-08 22:34:07 [info]: Database directory created
2025-10-08 22:34:07 [info]: Google Gemini provider initialized
2025-10-08 22:34:07 [info]: Hugging Face provider initialized
2025-10-08 22:34:07 [info]: Rate limiting using Redis store
2025-10-08 22:34:07 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:34:07 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:34:07 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:34:07 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:34:07 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:34:07 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:34:07 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:34:07 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:34:07 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:34:07 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:34:07 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:34:07 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:34:07 [info]: Redis connected for rate limiting
2025-10-08 22:34:07 [info]: Database connection established successfully
2025-10-08 22:34:07 [info]: 
        üöÄ Server is running!
        üîä Listening on port 5000
        üì± Environment: production
        üåê Frontend URL: http://localhost:3000
        ‚è∞ Started at: 2025-10-08T22:34:07.733Z
      
2025-10-08 22:34:11 [info]: ::1 - - [08/Oct/2025:22:34:11 +0000] "GET /health HTTP/1.1" 200 107 "-" "curl/8.14.1"
2025-10-08 22:34:11 [info]: [object Object]
2025-10-08 22:34:41 [info]: ::1 - - [08/Oct/2025:22:34:41 +0000] "GET /health HTTP/1.1" 200 108 "-" "curl/8.14.1"
2025-10-08 22:34:41 [info]: [object Object]
2025-10-08 22:35:07 [info]: ::ffff:172.18.0.1 - - [08/Oct/2025:22:35:07 +0000] "GET / HTTP/1.1" 404 128 "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36 Edg/141.0.0.0"
2025-10-08 22:35:07 [info]: [object Object]
2025-10-08 22:35:07 [info]: ::ffff:172.18.0.1 - - [08/Oct/2025:22:35:07 +0000] "GET /favicon.ico HTTP/1.1" 404 139 "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36 Edg/141.0.0.0"
2025-10-08 22:35:07 [info]: [object Object]
2025-10-08 22:35:11 [info]: ::1 - - [08/Oct/2025:22:35:11 +0000] "GET /health HTTP/1.1" 200 108 "-" "curl/8.14.1"
2025-10-08 22:35:11 [info]: [object Object]
2025-10-08 22:35:23 [info]: ::ffff:172.18.0.1 - - [08/Oct/2025:22:35:23 +0000] "GET /health HTTP/1.1" 200 107 "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36 Edg/141.0.0.0"
2025-10-08 22:35:23 [info]: [object Object]
2025-10-08 22:35:41 [info]: ::1 - - [08/Oct/2025:22:35:41 +0000] "GET /health HTTP/1.1" 200 108 "-" "curl/8.14.1"
2025-10-08 22:35:41 [info]: [object Object]
2025-10-08 22:36:11 [info]: ::1 - - [08/Oct/2025:22:36:11 +0000] "GET /health HTTP/1.1" 200 109 "-" "curl/8.14.1"
2025-10-08 22:36:11 [info]: [object Object]
2025-10-08 22:36:22 [info]: ::ffff:172.18.0.1 - - [08/Oct/2025:22:36:22 +0000] "GET /api/status HTTP/1.1" 200 47 "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36 Edg/141.0.0.0"
2025-10-08 22:36:22 [info]: [object Object]
2025-10-08 22:36:41 [info]: ::1 - - [08/Oct/2025:22:36:41 +0000] "GET /health HTTP/1.1" 200 108 "-" "curl/8.14.1"
2025-10-08 22:36:41 [info]: [object Object]
2025-10-08 22:36:59 [error]: [object Object]
2025-10-08 22:36:59 [info]: ::ffff:172.18.0.1 - - [08/Oct/2025:22:36:59 +0000] "POST /api/v1/auth/signup HTTP/1.1" 500 156 "-" "PostmanRuntime/7.48.0"
2025-10-08 22:36:59 [info]: [object Object]
2025-10-08 22:37:11 [info]: ::1 - - [08/Oct/2025:22:37:11 +0000] "GET /health HTTP/1.1" 200 109 "-" "curl/8.14.1"
2025-10-08 22:37:11 [info]: [object Object]
2025-10-08 22:37:41 [info]: ::1 - - [08/Oct/2025:22:37:41 +0000] "GET /health HTTP/1.1" 200 109 "-" "curl/8.14.1"
2025-10-08 22:37:41 [info]: [object Object]
2025-10-08 22:38:11 [info]: ::1 - - [08/Oct/2025:22:38:11 +0000] "GET /health HTTP/1.1" 200 109 "-" "curl/8.14.1"
2025-10-08 22:38:11 [info]: [object Object]
2025-10-08 22:38:41 [info]: ::1 - - [08/Oct/2025:22:38:41 +0000] "GET /health HTTP/1.1" 200 109 "-" "curl/8.14.1"
2025-10-08 22:38:41 [info]: [object Object]
2025-10-08 22:39:11 [info]: ::1 - - [08/Oct/2025:22:39:11 +0000] "GET /health HTTP/1.1" 200 109 "-" "curl/8.14.1"
2025-10-08 22:39:11 [info]: [object Object]
2025-10-08 22:39:41 [info]: ::1 - - [08/Oct/2025:22:39:41 +0000] "GET /health HTTP/1.1" 200 108 "-" "curl/8.14.1"
2025-10-08 22:39:41 [info]: [object Object]
2025-10-08 22:40:11 [info]: ::1 - - [08/Oct/2025:22:40:11 +0000] "GET /health HTTP/1.1" 200 108 "-" "curl/8.14.1"
2025-10-08 22:40:11 [info]: [object Object]
2025-10-08 22:40:41 [info]: ::1 - - [08/Oct/2025:22:40:41 +0000] "GET /health HTTP/1.1" 200 109 "-" "curl/8.14.1"
2025-10-08 22:40:41 [info]: [object Object]
2025-10-08 22:41:11 [info]: ::1 - - [08/Oct/2025:22:41:11 +0000] "GET /health HTTP/1.1" 200 109 "-" "curl/8.14.1"
2025-10-08 22:41:11 [info]: [object Object]
2025-10-08 22:41:41 [info]: ::1 - - [08/Oct/2025:22:41:41 +0000] "GET /health HTTP/1.1" 200 109 "-" "curl/8.14.1"
2025-10-08 22:41:41 [info]: [object Object]
2025-10-08 22:42:11 [info]: ::1 - - [08/Oct/2025:22:42:11 +0000] "GET /health HTTP/1.1" 200 109 "-" "curl/8.14.1"
2025-10-08 22:42:11 [info]: [object Object]
2025-10-08 22:42:41 [info]: ::1 - - [08/Oct/2025:22:42:41 +0000] "GET /health HTTP/1.1" 200 109 "-" "curl/8.14.1"
2025-10-08 22:42:41 [info]: [object Object]
2025-10-08 22:43:11 [info]: ::1 - - [08/Oct/2025:22:43:11 +0000] "GET /health HTTP/1.1" 200 109 "-" "curl/8.14.1"
2025-10-08 22:43:11 [info]: [object Object]
2025-10-08 22:43:41 [info]: ::1 - - [08/Oct/2025:22:43:41 +0000] "GET /health HTTP/1.1" 200 109 "-" "curl/8.14.1"
2025-10-08 22:43:41 [info]: [object Object]
2025-10-08 22:44:11 [info]: ::1 - - [08/Oct/2025:22:44:11 +0000] "GET /health HTTP/1.1" 200 109 "-" "curl/8.14.1"
2025-10-08 22:44:11 [info]: [object Object]
2025-10-08 22:44:42 [info]: ::1 - - [08/Oct/2025:22:44:42 +0000] "GET /health HTTP/1.1" 200 108 "-" "curl/8.14.1"
2025-10-08 22:44:42 [info]: [object Object]
2025-10-08 22:45:12 [info]: ::1 - - [08/Oct/2025:22:45:12 +0000] "GET /health HTTP/1.1" 200 109 "-" "curl/8.14.1"
2025-10-08 22:45:12 [info]: [object Object]
2025-10-08 22:45:42 [info]: ::1 - - [08/Oct/2025:22:45:42 +0000] "GET /health HTTP/1.1" 200 109 "-" "curl/8.14.1"
2025-10-08 22:45:42 [info]: [object Object]
2025-10-08 22:46:12 [info]: ::1 - - [08/Oct/2025:22:46:12 +0000] "GET /health HTTP/1.1" 200 109 "-" "curl/8.14.1"
2025-10-08 22:46:12 [info]: [object Object]
2025-10-08 22:46:42 [info]: ::1 - - [08/Oct/2025:22:46:42 +0000] "GET /health HTTP/1.1" 200 109 "-" "curl/8.14.1"
2025-10-08 22:46:42 [info]: [object Object]
2025-10-08 22:47:12 [info]: ::1 - - [08/Oct/2025:22:47:12 +0000] "GET /health HTTP/1.1" 200 109 "-" "curl/8.14.1"
2025-10-08 22:47:12 [info]: [object Object]
2025-10-08 22:47:42 [info]: ::1 - - [08/Oct/2025:22:47:42 +0000] "GET /health HTTP/1.1" 200 108 "-" "curl/8.14.1"
2025-10-08 22:47:42 [info]: [object Object]
2025-10-08 22:48:12 [info]: ::1 - - [08/Oct/2025:22:48:12 +0000] "GET /health HTTP/1.1" 200 109 "-" "curl/8.14.1"
2025-10-08 22:48:12 [info]: [object Object]
2025-10-08 22:56:07 [info]: Database directory created
2025-10-08 22:56:08 [info]: Google Gemini provider initialized
2025-10-08 22:56:08 [info]: Hugging Face provider initialized
2025-10-08 22:56:08 [info]: Rate limiting using Redis store
2025-10-08 22:56:08 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:08 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:08 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:08 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:08 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:08 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:08 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:08 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:08 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:08 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:08 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:08 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:08 [info]: Redis connected for rate limiting
2025-10-08 22:56:08 [info]: ‚úÖ Database connection established successfully
2025-10-08 22:56:08 [info]: üì¶ Loaded models: User, Chat, Message, UserSummary
2025-10-08 22:56:08 [info]: üîÑ Syncing database with alter...
2025-10-08 22:56:08 [error]: Failed to start server: foreign key constraint "Message_parentMessageId_fkey" cannot be implemented {
  "name": "SequelizeDatabaseError",
  "parent": {
    "length": 234,
    "name": "error",
    "severity": "ERROR",
    "code": "42804",
    "detail": "Key columns \"parentMessageId\" and \"id\" are of incompatible types: integer and uuid.",
    "file": "tablecmds.c",
    "line": "9489",
    "routine": "ATAddForeignKeyConstraint",
    "sql": "CREATE TABLE IF NOT EXISTS \"Message\" (\"id\"  SERIAL , \"chatId\" UUID NOT NULL REFERENCES \"Chat\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE, \"userId\" INTEGER REFERENCES \"User\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"role\" \"public\".\"enum_Message_role\" NOT NULL, \"content\" TEXT NOT NULL, \"model\" VARCHAR(50), \"tokens\" INTEGER DEFAULT 0, \"isEdited\" BOOLEAN DEFAULT false, \"editedAt\" TIMESTAMP WITH TIME ZONE, \"parentMessageId\" INTEGER REFERENCES \"Chat\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"feedback\" \"public\".\"enum_Message_feedback\", \"metadata\" JSON DEFAULT '{}', \"attachments\" JSON DEFAULT '[]', \"createdAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"updatedAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"deletedAt\" TIMESTAMP WITH TIME ZONE, PRIMARY KEY (\"id\"));"
  },
  "original": "[Circular Reference]",
  "sql": "CREATE TABLE IF NOT EXISTS \"Message\" (\"id\"  SERIAL , \"chatId\" UUID NOT NULL REFERENCES \"Chat\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE, \"userId\" INTEGER REFERENCES \"User\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"role\" \"public\".\"enum_Message_role\" NOT NULL, \"content\" TEXT NOT NULL, \"model\" VARCHAR(50), \"tokens\" INTEGER DEFAULT 0, \"isEdited\" BOOLEAN DEFAULT false, \"editedAt\" TIMESTAMP WITH TIME ZONE, \"parentMessageId\" INTEGER REFERENCES \"Chat\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"feedback\" \"public\".\"enum_Message_feedback\", \"metadata\" JSON DEFAULT '{}', \"attachments\" JSON DEFAULT '[]', \"createdAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"updatedAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"deletedAt\" TIMESTAMP WITH TIME ZONE, PRIMARY KEY (\"id\"));",
  "parameters": {},
  "stack": "Error\n    at Query.run (/app/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)\n    at /app/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PostgresQueryInterface.createTable (/app/node_modules/sequelize/lib/dialects/abstract/query-interface.js:98:12)\n    at async Message.sync (/app/node_modules/sequelize/lib/model.js:942:7)\n    at async Sequelize.sync (/app/node_modules/sequelize/lib/sequelize.js:377:9)\n    at async startServer (/app/server.js:290:13)"
}
2025-10-08 22:56:12 [info]: Google Gemini provider initialized
2025-10-08 22:56:12 [info]: Hugging Face provider initialized
2025-10-08 22:56:12 [info]: Rate limiting using Redis store
2025-10-08 22:56:12 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:12 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:12 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:12 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:12 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:12 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:12 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:12 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:12 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:12 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:12 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:12 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:12 [info]: Redis connected for rate limiting
2025-10-08 22:56:12 [info]: ‚úÖ Database connection established successfully
2025-10-08 22:56:12 [info]: üì¶ Loaded models: User, Chat, Message, UserSummary
2025-10-08 22:56:12 [info]: üîÑ Syncing database with alter...
2025-10-08 22:56:13 [error]: Failed to start server: foreign key constraint "Message_parentMessageId_fkey" cannot be implemented {
  "name": "SequelizeDatabaseError",
  "parent": {
    "length": 234,
    "name": "error",
    "severity": "ERROR",
    "code": "42804",
    "detail": "Key columns \"parentMessageId\" and \"id\" are of incompatible types: integer and uuid.",
    "file": "tablecmds.c",
    "line": "9489",
    "routine": "ATAddForeignKeyConstraint",
    "sql": "CREATE TABLE IF NOT EXISTS \"Message\" (\"id\"  SERIAL , \"chatId\" UUID NOT NULL REFERENCES \"Chat\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE, \"userId\" INTEGER REFERENCES \"User\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"role\" \"public\".\"enum_Message_role\" NOT NULL, \"content\" TEXT NOT NULL, \"model\" VARCHAR(50), \"tokens\" INTEGER DEFAULT 0, \"isEdited\" BOOLEAN DEFAULT false, \"editedAt\" TIMESTAMP WITH TIME ZONE, \"parentMessageId\" INTEGER REFERENCES \"Chat\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"feedback\" \"public\".\"enum_Message_feedback\", \"metadata\" JSON DEFAULT '{}', \"attachments\" JSON DEFAULT '[]', \"createdAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"updatedAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"deletedAt\" TIMESTAMP WITH TIME ZONE, PRIMARY KEY (\"id\"));"
  },
  "original": "[Circular Reference]",
  "sql": "CREATE TABLE IF NOT EXISTS \"Message\" (\"id\"  SERIAL , \"chatId\" UUID NOT NULL REFERENCES \"Chat\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE, \"userId\" INTEGER REFERENCES \"User\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"role\" \"public\".\"enum_Message_role\" NOT NULL, \"content\" TEXT NOT NULL, \"model\" VARCHAR(50), \"tokens\" INTEGER DEFAULT 0, \"isEdited\" BOOLEAN DEFAULT false, \"editedAt\" TIMESTAMP WITH TIME ZONE, \"parentMessageId\" INTEGER REFERENCES \"Chat\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"feedback\" \"public\".\"enum_Message_feedback\", \"metadata\" JSON DEFAULT '{}', \"attachments\" JSON DEFAULT '[]', \"createdAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"updatedAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"deletedAt\" TIMESTAMP WITH TIME ZONE, PRIMARY KEY (\"id\"));",
  "parameters": {},
  "stack": "Error\n    at Query.run (/app/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)\n    at /app/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PostgresQueryInterface.createTable (/app/node_modules/sequelize/lib/dialects/abstract/query-interface.js:98:12)\n    at async Message.sync (/app/node_modules/sequelize/lib/model.js:942:7)\n    at async Sequelize.sync (/app/node_modules/sequelize/lib/sequelize.js:377:9)\n    at async startServer (/app/server.js:290:13)"
}
2025-10-08 22:56:16 [info]: Google Gemini provider initialized
2025-10-08 22:56:16 [info]: Hugging Face provider initialized
2025-10-08 22:56:16 [info]: Rate limiting using Redis store
2025-10-08 22:56:16 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:16 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:16 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:16 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:16 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:16 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:16 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:16 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:16 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:16 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:16 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:16 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:17 [info]: Redis connected for rate limiting
2025-10-08 22:56:17 [info]: ‚úÖ Database connection established successfully
2025-10-08 22:56:17 [info]: üì¶ Loaded models: User, Chat, Message, UserSummary
2025-10-08 22:56:17 [info]: üîÑ Syncing database with alter...
2025-10-08 22:56:17 [error]: Failed to start server: foreign key constraint "Message_parentMessageId_fkey" cannot be implemented {
  "name": "SequelizeDatabaseError",
  "parent": {
    "length": 234,
    "name": "error",
    "severity": "ERROR",
    "code": "42804",
    "detail": "Key columns \"parentMessageId\" and \"id\" are of incompatible types: integer and uuid.",
    "file": "tablecmds.c",
    "line": "9489",
    "routine": "ATAddForeignKeyConstraint",
    "sql": "CREATE TABLE IF NOT EXISTS \"Message\" (\"id\"  SERIAL , \"chatId\" UUID NOT NULL REFERENCES \"Chat\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE, \"userId\" INTEGER REFERENCES \"User\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"role\" \"public\".\"enum_Message_role\" NOT NULL, \"content\" TEXT NOT NULL, \"model\" VARCHAR(50), \"tokens\" INTEGER DEFAULT 0, \"isEdited\" BOOLEAN DEFAULT false, \"editedAt\" TIMESTAMP WITH TIME ZONE, \"parentMessageId\" INTEGER REFERENCES \"Chat\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"feedback\" \"public\".\"enum_Message_feedback\", \"metadata\" JSON DEFAULT '{}', \"attachments\" JSON DEFAULT '[]', \"createdAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"updatedAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"deletedAt\" TIMESTAMP WITH TIME ZONE, PRIMARY KEY (\"id\"));"
  },
  "original": "[Circular Reference]",
  "sql": "CREATE TABLE IF NOT EXISTS \"Message\" (\"id\"  SERIAL , \"chatId\" UUID NOT NULL REFERENCES \"Chat\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE, \"userId\" INTEGER REFERENCES \"User\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"role\" \"public\".\"enum_Message_role\" NOT NULL, \"content\" TEXT NOT NULL, \"model\" VARCHAR(50), \"tokens\" INTEGER DEFAULT 0, \"isEdited\" BOOLEAN DEFAULT false, \"editedAt\" TIMESTAMP WITH TIME ZONE, \"parentMessageId\" INTEGER REFERENCES \"Chat\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"feedback\" \"public\".\"enum_Message_feedback\", \"metadata\" JSON DEFAULT '{}', \"attachments\" JSON DEFAULT '[]', \"createdAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"updatedAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"deletedAt\" TIMESTAMP WITH TIME ZONE, PRIMARY KEY (\"id\"));",
  "parameters": {},
  "stack": "Error\n    at Query.run (/app/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)\n    at /app/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PostgresQueryInterface.createTable (/app/node_modules/sequelize/lib/dialects/abstract/query-interface.js:98:12)\n    at async Message.sync (/app/node_modules/sequelize/lib/model.js:942:7)\n    at async Sequelize.sync (/app/node_modules/sequelize/lib/sequelize.js:377:9)\n    at async startServer (/app/server.js:290:13)"
}
2025-10-08 22:56:21 [info]: Google Gemini provider initialized
2025-10-08 22:56:21 [info]: Hugging Face provider initialized
2025-10-08 22:56:21 [info]: Rate limiting using Redis store
2025-10-08 22:56:21 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:21 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:21 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:21 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:21 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:21 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:21 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:21 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:21 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:21 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:21 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:21 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:21 [info]: Redis connected for rate limiting
2025-10-08 22:56:21 [info]: ‚úÖ Database connection established successfully
2025-10-08 22:56:21 [info]: üì¶ Loaded models: User, Chat, Message, UserSummary
2025-10-08 22:56:21 [info]: üîÑ Syncing database with alter...
2025-10-08 22:56:22 [error]: Failed to start server: foreign key constraint "Message_parentMessageId_fkey" cannot be implemented {
  "name": "SequelizeDatabaseError",
  "parent": {
    "length": 234,
    "name": "error",
    "severity": "ERROR",
    "code": "42804",
    "detail": "Key columns \"parentMessageId\" and \"id\" are of incompatible types: integer and uuid.",
    "file": "tablecmds.c",
    "line": "9489",
    "routine": "ATAddForeignKeyConstraint",
    "sql": "CREATE TABLE IF NOT EXISTS \"Message\" (\"id\"  SERIAL , \"chatId\" UUID NOT NULL REFERENCES \"Chat\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE, \"userId\" INTEGER REFERENCES \"User\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"role\" \"public\".\"enum_Message_role\" NOT NULL, \"content\" TEXT NOT NULL, \"model\" VARCHAR(50), \"tokens\" INTEGER DEFAULT 0, \"isEdited\" BOOLEAN DEFAULT false, \"editedAt\" TIMESTAMP WITH TIME ZONE, \"parentMessageId\" INTEGER REFERENCES \"Chat\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"feedback\" \"public\".\"enum_Message_feedback\", \"metadata\" JSON DEFAULT '{}', \"attachments\" JSON DEFAULT '[]', \"createdAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"updatedAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"deletedAt\" TIMESTAMP WITH TIME ZONE, PRIMARY KEY (\"id\"));"
  },
  "original": "[Circular Reference]",
  "sql": "CREATE TABLE IF NOT EXISTS \"Message\" (\"id\"  SERIAL , \"chatId\" UUID NOT NULL REFERENCES \"Chat\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE, \"userId\" INTEGER REFERENCES \"User\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"role\" \"public\".\"enum_Message_role\" NOT NULL, \"content\" TEXT NOT NULL, \"model\" VARCHAR(50), \"tokens\" INTEGER DEFAULT 0, \"isEdited\" BOOLEAN DEFAULT false, \"editedAt\" TIMESTAMP WITH TIME ZONE, \"parentMessageId\" INTEGER REFERENCES \"Chat\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"feedback\" \"public\".\"enum_Message_feedback\", \"metadata\" JSON DEFAULT '{}', \"attachments\" JSON DEFAULT '[]', \"createdAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"updatedAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"deletedAt\" TIMESTAMP WITH TIME ZONE, PRIMARY KEY (\"id\"));",
  "parameters": {},
  "stack": "Error\n    at Query.run (/app/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)\n    at /app/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PostgresQueryInterface.createTable (/app/node_modules/sequelize/lib/dialects/abstract/query-interface.js:98:12)\n    at async Message.sync (/app/node_modules/sequelize/lib/model.js:942:7)\n    at async Sequelize.sync (/app/node_modules/sequelize/lib/sequelize.js:377:9)\n    at async startServer (/app/server.js:290:13)"
}
2025-10-08 22:56:25 [info]: Google Gemini provider initialized
2025-10-08 22:56:25 [info]: Hugging Face provider initialized
2025-10-08 22:56:25 [info]: Rate limiting using Redis store
2025-10-08 22:56:25 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:25 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:25 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:25 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:25 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:25 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:25 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:25 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:25 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:25 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:25 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:25 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:25 [info]: Redis connected for rate limiting
2025-10-08 22:56:26 [info]: ‚úÖ Database connection established successfully
2025-10-08 22:56:26 [info]: üì¶ Loaded models: User, Chat, Message, UserSummary
2025-10-08 22:56:26 [info]: üîÑ Syncing database with alter...
2025-10-08 22:56:26 [error]: Failed to start server: foreign key constraint "Message_parentMessageId_fkey" cannot be implemented {
  "name": "SequelizeDatabaseError",
  "parent": {
    "length": 234,
    "name": "error",
    "severity": "ERROR",
    "code": "42804",
    "detail": "Key columns \"parentMessageId\" and \"id\" are of incompatible types: integer and uuid.",
    "file": "tablecmds.c",
    "line": "9489",
    "routine": "ATAddForeignKeyConstraint",
    "sql": "CREATE TABLE IF NOT EXISTS \"Message\" (\"id\"  SERIAL , \"chatId\" UUID NOT NULL REFERENCES \"Chat\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE, \"userId\" INTEGER REFERENCES \"User\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"role\" \"public\".\"enum_Message_role\" NOT NULL, \"content\" TEXT NOT NULL, \"model\" VARCHAR(50), \"tokens\" INTEGER DEFAULT 0, \"isEdited\" BOOLEAN DEFAULT false, \"editedAt\" TIMESTAMP WITH TIME ZONE, \"parentMessageId\" INTEGER REFERENCES \"Chat\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"feedback\" \"public\".\"enum_Message_feedback\", \"metadata\" JSON DEFAULT '{}', \"attachments\" JSON DEFAULT '[]', \"createdAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"updatedAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"deletedAt\" TIMESTAMP WITH TIME ZONE, PRIMARY KEY (\"id\"));"
  },
  "original": "[Circular Reference]",
  "sql": "CREATE TABLE IF NOT EXISTS \"Message\" (\"id\"  SERIAL , \"chatId\" UUID NOT NULL REFERENCES \"Chat\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE, \"userId\" INTEGER REFERENCES \"User\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"role\" \"public\".\"enum_Message_role\" NOT NULL, \"content\" TEXT NOT NULL, \"model\" VARCHAR(50), \"tokens\" INTEGER DEFAULT 0, \"isEdited\" BOOLEAN DEFAULT false, \"editedAt\" TIMESTAMP WITH TIME ZONE, \"parentMessageId\" INTEGER REFERENCES \"Chat\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"feedback\" \"public\".\"enum_Message_feedback\", \"metadata\" JSON DEFAULT '{}', \"attachments\" JSON DEFAULT '[]', \"createdAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"updatedAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"deletedAt\" TIMESTAMP WITH TIME ZONE, PRIMARY KEY (\"id\"));",
  "parameters": {},
  "stack": "Error\n    at Query.run (/app/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)\n    at /app/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PostgresQueryInterface.createTable (/app/node_modules/sequelize/lib/dialects/abstract/query-interface.js:98:12)\n    at async Message.sync (/app/node_modules/sequelize/lib/model.js:942:7)\n    at async Sequelize.sync (/app/node_modules/sequelize/lib/sequelize.js:377:9)\n    at async startServer (/app/server.js:290:13)"
}
2025-10-08 22:56:30 [info]: Google Gemini provider initialized
2025-10-08 22:56:30 [info]: Hugging Face provider initialized
2025-10-08 22:56:30 [info]: Rate limiting using Redis store
2025-10-08 22:56:30 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:30 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:30 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:30 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:30 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:30 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:30 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:30 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:30 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:30 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:30 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:30 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:31 [info]: Redis connected for rate limiting
2025-10-08 22:56:31 [info]: ‚úÖ Database connection established successfully
2025-10-08 22:56:31 [info]: üì¶ Loaded models: User, Chat, Message, UserSummary
2025-10-08 22:56:31 [info]: üîÑ Syncing database with alter...
2025-10-08 22:56:31 [error]: Failed to start server: foreign key constraint "Message_parentMessageId_fkey" cannot be implemented {
  "name": "SequelizeDatabaseError",
  "parent": {
    "length": 234,
    "name": "error",
    "severity": "ERROR",
    "code": "42804",
    "detail": "Key columns \"parentMessageId\" and \"id\" are of incompatible types: integer and uuid.",
    "file": "tablecmds.c",
    "line": "9489",
    "routine": "ATAddForeignKeyConstraint",
    "sql": "CREATE TABLE IF NOT EXISTS \"Message\" (\"id\"  SERIAL , \"chatId\" UUID NOT NULL REFERENCES \"Chat\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE, \"userId\" INTEGER REFERENCES \"User\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"role\" \"public\".\"enum_Message_role\" NOT NULL, \"content\" TEXT NOT NULL, \"model\" VARCHAR(50), \"tokens\" INTEGER DEFAULT 0, \"isEdited\" BOOLEAN DEFAULT false, \"editedAt\" TIMESTAMP WITH TIME ZONE, \"parentMessageId\" INTEGER REFERENCES \"Chat\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"feedback\" \"public\".\"enum_Message_feedback\", \"metadata\" JSON DEFAULT '{}', \"attachments\" JSON DEFAULT '[]', \"createdAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"updatedAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"deletedAt\" TIMESTAMP WITH TIME ZONE, PRIMARY KEY (\"id\"));"
  },
  "original": "[Circular Reference]",
  "sql": "CREATE TABLE IF NOT EXISTS \"Message\" (\"id\"  SERIAL , \"chatId\" UUID NOT NULL REFERENCES \"Chat\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE, \"userId\" INTEGER REFERENCES \"User\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"role\" \"public\".\"enum_Message_role\" NOT NULL, \"content\" TEXT NOT NULL, \"model\" VARCHAR(50), \"tokens\" INTEGER DEFAULT 0, \"isEdited\" BOOLEAN DEFAULT false, \"editedAt\" TIMESTAMP WITH TIME ZONE, \"parentMessageId\" INTEGER REFERENCES \"Chat\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"feedback\" \"public\".\"enum_Message_feedback\", \"metadata\" JSON DEFAULT '{}', \"attachments\" JSON DEFAULT '[]', \"createdAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"updatedAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"deletedAt\" TIMESTAMP WITH TIME ZONE, PRIMARY KEY (\"id\"));",
  "parameters": {},
  "stack": "Error\n    at Query.run (/app/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)\n    at /app/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PostgresQueryInterface.createTable (/app/node_modules/sequelize/lib/dialects/abstract/query-interface.js:98:12)\n    at async Message.sync (/app/node_modules/sequelize/lib/model.js:942:7)\n    at async Sequelize.sync (/app/node_modules/sequelize/lib/sequelize.js:377:9)\n    at async startServer (/app/server.js:290:13)"
}
2025-10-08 22:56:37 [info]: Google Gemini provider initialized
2025-10-08 22:56:37 [info]: Hugging Face provider initialized
2025-10-08 22:56:37 [info]: Rate limiting using Redis store
2025-10-08 22:56:37 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:37 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:37 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:37 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:37 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:37 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:37 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:37 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:37 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:37 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:37 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:37 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:37 [info]: Redis connected for rate limiting
2025-10-08 22:56:37 [info]: ‚úÖ Database connection established successfully
2025-10-08 22:56:37 [info]: üì¶ Loaded models: User, Chat, Message, UserSummary
2025-10-08 22:56:37 [info]: üîÑ Syncing database with alter...
2025-10-08 22:56:38 [error]: Failed to start server: foreign key constraint "Message_parentMessageId_fkey" cannot be implemented {
  "name": "SequelizeDatabaseError",
  "parent": {
    "length": 234,
    "name": "error",
    "severity": "ERROR",
    "code": "42804",
    "detail": "Key columns \"parentMessageId\" and \"id\" are of incompatible types: integer and uuid.",
    "file": "tablecmds.c",
    "line": "9489",
    "routine": "ATAddForeignKeyConstraint",
    "sql": "CREATE TABLE IF NOT EXISTS \"Message\" (\"id\"  SERIAL , \"chatId\" UUID NOT NULL REFERENCES \"Chat\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE, \"userId\" INTEGER REFERENCES \"User\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"role\" \"public\".\"enum_Message_role\" NOT NULL, \"content\" TEXT NOT NULL, \"model\" VARCHAR(50), \"tokens\" INTEGER DEFAULT 0, \"isEdited\" BOOLEAN DEFAULT false, \"editedAt\" TIMESTAMP WITH TIME ZONE, \"parentMessageId\" INTEGER REFERENCES \"Chat\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"feedback\" \"public\".\"enum_Message_feedback\", \"metadata\" JSON DEFAULT '{}', \"attachments\" JSON DEFAULT '[]', \"createdAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"updatedAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"deletedAt\" TIMESTAMP WITH TIME ZONE, PRIMARY KEY (\"id\"));"
  },
  "original": "[Circular Reference]",
  "sql": "CREATE TABLE IF NOT EXISTS \"Message\" (\"id\"  SERIAL , \"chatId\" UUID NOT NULL REFERENCES \"Chat\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE, \"userId\" INTEGER REFERENCES \"User\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"role\" \"public\".\"enum_Message_role\" NOT NULL, \"content\" TEXT NOT NULL, \"model\" VARCHAR(50), \"tokens\" INTEGER DEFAULT 0, \"isEdited\" BOOLEAN DEFAULT false, \"editedAt\" TIMESTAMP WITH TIME ZONE, \"parentMessageId\" INTEGER REFERENCES \"Chat\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"feedback\" \"public\".\"enum_Message_feedback\", \"metadata\" JSON DEFAULT '{}', \"attachments\" JSON DEFAULT '[]', \"createdAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"updatedAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"deletedAt\" TIMESTAMP WITH TIME ZONE, PRIMARY KEY (\"id\"));",
  "parameters": {},
  "stack": "Error\n    at Query.run (/app/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)\n    at /app/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PostgresQueryInterface.createTable (/app/node_modules/sequelize/lib/dialects/abstract/query-interface.js:98:12)\n    at async Message.sync (/app/node_modules/sequelize/lib/model.js:942:7)\n    at async Sequelize.sync (/app/node_modules/sequelize/lib/sequelize.js:377:9)\n    at async startServer (/app/server.js:290:13)"
}
2025-10-08 22:56:46 [info]: Google Gemini provider initialized
2025-10-08 22:56:46 [info]: Hugging Face provider initialized
2025-10-08 22:56:46 [info]: Rate limiting using Redis store
2025-10-08 22:56:46 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:46 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:46 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:46 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:46 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:46 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:46 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:46 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:46 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:46 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:46 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:46 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:56:46 [info]: Redis connected for rate limiting
2025-10-08 22:56:47 [info]: ‚úÖ Database connection established successfully
2025-10-08 22:56:47 [info]: üì¶ Loaded models: User, Chat, Message, UserSummary
2025-10-08 22:56:47 [info]: üîÑ Syncing database with alter...
2025-10-08 22:56:47 [error]: Failed to start server: foreign key constraint "Message_parentMessageId_fkey" cannot be implemented {
  "name": "SequelizeDatabaseError",
  "parent": {
    "length": 234,
    "name": "error",
    "severity": "ERROR",
    "code": "42804",
    "detail": "Key columns \"parentMessageId\" and \"id\" are of incompatible types: integer and uuid.",
    "file": "tablecmds.c",
    "line": "9489",
    "routine": "ATAddForeignKeyConstraint",
    "sql": "CREATE TABLE IF NOT EXISTS \"Message\" (\"id\"  SERIAL , \"chatId\" UUID NOT NULL REFERENCES \"Chat\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE, \"userId\" INTEGER REFERENCES \"User\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"role\" \"public\".\"enum_Message_role\" NOT NULL, \"content\" TEXT NOT NULL, \"model\" VARCHAR(50), \"tokens\" INTEGER DEFAULT 0, \"isEdited\" BOOLEAN DEFAULT false, \"editedAt\" TIMESTAMP WITH TIME ZONE, \"parentMessageId\" INTEGER REFERENCES \"Chat\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"feedback\" \"public\".\"enum_Message_feedback\", \"metadata\" JSON DEFAULT '{}', \"attachments\" JSON DEFAULT '[]', \"createdAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"updatedAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"deletedAt\" TIMESTAMP WITH TIME ZONE, PRIMARY KEY (\"id\"));"
  },
  "original": "[Circular Reference]",
  "sql": "CREATE TABLE IF NOT EXISTS \"Message\" (\"id\"  SERIAL , \"chatId\" UUID NOT NULL REFERENCES \"Chat\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE, \"userId\" INTEGER REFERENCES \"User\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"role\" \"public\".\"enum_Message_role\" NOT NULL, \"content\" TEXT NOT NULL, \"model\" VARCHAR(50), \"tokens\" INTEGER DEFAULT 0, \"isEdited\" BOOLEAN DEFAULT false, \"editedAt\" TIMESTAMP WITH TIME ZONE, \"parentMessageId\" INTEGER REFERENCES \"Chat\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"feedback\" \"public\".\"enum_Message_feedback\", \"metadata\" JSON DEFAULT '{}', \"attachments\" JSON DEFAULT '[]', \"createdAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"updatedAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"deletedAt\" TIMESTAMP WITH TIME ZONE, PRIMARY KEY (\"id\"));",
  "parameters": {},
  "stack": "Error\n    at Query.run (/app/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)\n    at /app/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PostgresQueryInterface.createTable (/app/node_modules/sequelize/lib/dialects/abstract/query-interface.js:98:12)\n    at async Message.sync (/app/node_modules/sequelize/lib/model.js:942:7)\n    at async Sequelize.sync (/app/node_modules/sequelize/lib/sequelize.js:377:9)\n    at async startServer (/app/server.js:290:13)"
}
2025-10-08 22:57:02 [info]: Google Gemini provider initialized
2025-10-08 22:57:02 [info]: Hugging Face provider initialized
2025-10-08 22:57:02 [info]: Rate limiting using Redis store
2025-10-08 22:57:02 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:57:02 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:57:02 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:57:02 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:57:02 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:57:02 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:57:02 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:57:02 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:57:02 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:57:02 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:57:02 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:57:02 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:57:02 [info]: Redis connected for rate limiting
2025-10-08 22:57:02 [info]: ‚úÖ Database connection established successfully
2025-10-08 22:57:02 [info]: üì¶ Loaded models: User, Chat, Message, UserSummary
2025-10-08 22:57:02 [info]: üîÑ Syncing database with alter...
2025-10-08 22:57:03 [error]: Failed to start server: foreign key constraint "Message_parentMessageId_fkey" cannot be implemented {
  "name": "SequelizeDatabaseError",
  "parent": {
    "length": 234,
    "name": "error",
    "severity": "ERROR",
    "code": "42804",
    "detail": "Key columns \"parentMessageId\" and \"id\" are of incompatible types: integer and uuid.",
    "file": "tablecmds.c",
    "line": "9489",
    "routine": "ATAddForeignKeyConstraint",
    "sql": "CREATE TABLE IF NOT EXISTS \"Message\" (\"id\"  SERIAL , \"chatId\" UUID NOT NULL REFERENCES \"Chat\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE, \"userId\" INTEGER REFERENCES \"User\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"role\" \"public\".\"enum_Message_role\" NOT NULL, \"content\" TEXT NOT NULL, \"model\" VARCHAR(50), \"tokens\" INTEGER DEFAULT 0, \"isEdited\" BOOLEAN DEFAULT false, \"editedAt\" TIMESTAMP WITH TIME ZONE, \"parentMessageId\" INTEGER REFERENCES \"Chat\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"feedback\" \"public\".\"enum_Message_feedback\", \"metadata\" JSON DEFAULT '{}', \"attachments\" JSON DEFAULT '[]', \"createdAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"updatedAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"deletedAt\" TIMESTAMP WITH TIME ZONE, PRIMARY KEY (\"id\"));"
  },
  "original": "[Circular Reference]",
  "sql": "CREATE TABLE IF NOT EXISTS \"Message\" (\"id\"  SERIAL , \"chatId\" UUID NOT NULL REFERENCES \"Chat\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE, \"userId\" INTEGER REFERENCES \"User\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"role\" \"public\".\"enum_Message_role\" NOT NULL, \"content\" TEXT NOT NULL, \"model\" VARCHAR(50), \"tokens\" INTEGER DEFAULT 0, \"isEdited\" BOOLEAN DEFAULT false, \"editedAt\" TIMESTAMP WITH TIME ZONE, \"parentMessageId\" INTEGER REFERENCES \"Chat\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"feedback\" \"public\".\"enum_Message_feedback\", \"metadata\" JSON DEFAULT '{}', \"attachments\" JSON DEFAULT '[]', \"createdAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"updatedAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"deletedAt\" TIMESTAMP WITH TIME ZONE, PRIMARY KEY (\"id\"));",
  "parameters": {},
  "stack": "Error\n    at Query.run (/app/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)\n    at /app/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PostgresQueryInterface.createTable (/app/node_modules/sequelize/lib/dialects/abstract/query-interface.js:98:12)\n    at async Message.sync (/app/node_modules/sequelize/lib/model.js:942:7)\n    at async Sequelize.sync (/app/node_modules/sequelize/lib/sequelize.js:377:9)\n    at async startServer (/app/server.js:290:13)"
}
2025-10-08 22:57:31 [info]: Google Gemini provider initialized
2025-10-08 22:57:31 [info]: Hugging Face provider initialized
2025-10-08 22:57:31 [info]: Rate limiting using Redis store
2025-10-08 22:57:31 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:57:31 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:57:31 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:57:31 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:57:31 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:57:31 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:57:31 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:57:31 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:57:31 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:57:31 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:57:31 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:57:31 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:57:31 [info]: Redis connected for rate limiting
2025-10-08 22:57:31 [info]: ‚úÖ Database connection established successfully
2025-10-08 22:57:31 [info]: üì¶ Loaded models: User, Chat, Message, UserSummary
2025-10-08 22:57:31 [info]: üîÑ Syncing database with alter...
2025-10-08 22:57:32 [error]: Failed to start server: foreign key constraint "Message_parentMessageId_fkey" cannot be implemented {
  "name": "SequelizeDatabaseError",
  "parent": {
    "length": 234,
    "name": "error",
    "severity": "ERROR",
    "code": "42804",
    "detail": "Key columns \"parentMessageId\" and \"id\" are of incompatible types: integer and uuid.",
    "file": "tablecmds.c",
    "line": "9489",
    "routine": "ATAddForeignKeyConstraint",
    "sql": "CREATE TABLE IF NOT EXISTS \"Message\" (\"id\"  SERIAL , \"chatId\" UUID NOT NULL REFERENCES \"Chat\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE, \"userId\" INTEGER REFERENCES \"User\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"role\" \"public\".\"enum_Message_role\" NOT NULL, \"content\" TEXT NOT NULL, \"model\" VARCHAR(50), \"tokens\" INTEGER DEFAULT 0, \"isEdited\" BOOLEAN DEFAULT false, \"editedAt\" TIMESTAMP WITH TIME ZONE, \"parentMessageId\" INTEGER REFERENCES \"Chat\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"feedback\" \"public\".\"enum_Message_feedback\", \"metadata\" JSON DEFAULT '{}', \"attachments\" JSON DEFAULT '[]', \"createdAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"updatedAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"deletedAt\" TIMESTAMP WITH TIME ZONE, PRIMARY KEY (\"id\"));"
  },
  "original": "[Circular Reference]",
  "sql": "CREATE TABLE IF NOT EXISTS \"Message\" (\"id\"  SERIAL , \"chatId\" UUID NOT NULL REFERENCES \"Chat\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE, \"userId\" INTEGER REFERENCES \"User\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"role\" \"public\".\"enum_Message_role\" NOT NULL, \"content\" TEXT NOT NULL, \"model\" VARCHAR(50), \"tokens\" INTEGER DEFAULT 0, \"isEdited\" BOOLEAN DEFAULT false, \"editedAt\" TIMESTAMP WITH TIME ZONE, \"parentMessageId\" INTEGER REFERENCES \"Chat\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"feedback\" \"public\".\"enum_Message_feedback\", \"metadata\" JSON DEFAULT '{}', \"attachments\" JSON DEFAULT '[]', \"createdAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"updatedAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"deletedAt\" TIMESTAMP WITH TIME ZONE, PRIMARY KEY (\"id\"));",
  "parameters": {},
  "stack": "Error\n    at Query.run (/app/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)\n    at /app/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PostgresQueryInterface.createTable (/app/node_modules/sequelize/lib/dialects/abstract/query-interface.js:98:12)\n    at async Message.sync (/app/node_modules/sequelize/lib/model.js:942:7)\n    at async Sequelize.sync (/app/node_modules/sequelize/lib/sequelize.js:377:9)\n    at async startServer (/app/server.js:290:13)"
}
2025-10-08 22:58:26 [info]: Google Gemini provider initialized
2025-10-08 22:58:26 [info]: Hugging Face provider initialized
2025-10-08 22:58:26 [info]: Rate limiting using Redis store
2025-10-08 22:58:26 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:58:26 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:58:26 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:58:26 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:58:26 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:58:26 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:58:26 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:58:26 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:58:26 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:58:26 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:58:26 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:58:26 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:58:26 [info]: Redis connected for rate limiting
2025-10-08 22:58:26 [info]: ‚úÖ Database connection established successfully
2025-10-08 22:58:26 [info]: üì¶ Loaded models: User, Chat, Message, UserSummary
2025-10-08 22:58:26 [info]: üîÑ Syncing database with alter...
2025-10-08 22:58:27 [error]: Failed to start server: foreign key constraint "Message_parentMessageId_fkey" cannot be implemented {
  "name": "SequelizeDatabaseError",
  "parent": {
    "length": 234,
    "name": "error",
    "severity": "ERROR",
    "code": "42804",
    "detail": "Key columns \"parentMessageId\" and \"id\" are of incompatible types: integer and uuid.",
    "file": "tablecmds.c",
    "line": "9489",
    "routine": "ATAddForeignKeyConstraint",
    "sql": "CREATE TABLE IF NOT EXISTS \"Message\" (\"id\"  SERIAL , \"chatId\" UUID NOT NULL REFERENCES \"Chat\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE, \"userId\" INTEGER REFERENCES \"User\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"role\" \"public\".\"enum_Message_role\" NOT NULL, \"content\" TEXT NOT NULL, \"model\" VARCHAR(50), \"tokens\" INTEGER DEFAULT 0, \"isEdited\" BOOLEAN DEFAULT false, \"editedAt\" TIMESTAMP WITH TIME ZONE, \"parentMessageId\" INTEGER REFERENCES \"Chat\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"feedback\" \"public\".\"enum_Message_feedback\", \"metadata\" JSON DEFAULT '{}', \"attachments\" JSON DEFAULT '[]', \"createdAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"updatedAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"deletedAt\" TIMESTAMP WITH TIME ZONE, PRIMARY KEY (\"id\"));"
  },
  "original": "[Circular Reference]",
  "sql": "CREATE TABLE IF NOT EXISTS \"Message\" (\"id\"  SERIAL , \"chatId\" UUID NOT NULL REFERENCES \"Chat\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE, \"userId\" INTEGER REFERENCES \"User\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"role\" \"public\".\"enum_Message_role\" NOT NULL, \"content\" TEXT NOT NULL, \"model\" VARCHAR(50), \"tokens\" INTEGER DEFAULT 0, \"isEdited\" BOOLEAN DEFAULT false, \"editedAt\" TIMESTAMP WITH TIME ZONE, \"parentMessageId\" INTEGER REFERENCES \"Chat\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"feedback\" \"public\".\"enum_Message_feedback\", \"metadata\" JSON DEFAULT '{}', \"attachments\" JSON DEFAULT '[]', \"createdAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"updatedAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"deletedAt\" TIMESTAMP WITH TIME ZONE, PRIMARY KEY (\"id\"));",
  "parameters": {},
  "stack": "Error\n    at Query.run (/app/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)\n    at /app/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PostgresQueryInterface.createTable (/app/node_modules/sequelize/lib/dialects/abstract/query-interface.js:98:12)\n    at async Message.sync (/app/node_modules/sequelize/lib/model.js:942:7)\n    at async Sequelize.sync (/app/node_modules/sequelize/lib/sequelize.js:377:9)\n    at async startServer (/app/server.js:290:13)"
}
2025-10-08 22:59:29 [info]: Google Gemini provider initialized
2025-10-08 22:59:29 [info]: Hugging Face provider initialized
2025-10-08 22:59:30 [info]: Rate limiting using Redis store
2025-10-08 22:59:30 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:59:30 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:59:30 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:59:30 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:59:30 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:59:30 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:59:30 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:59:30 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:59:30 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:59:30 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:59:30 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:59:30 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 22:59:30 [info]: Redis connected for rate limiting
2025-10-08 22:59:30 [info]: ‚úÖ Database connection established successfully
2025-10-08 22:59:30 [info]: üì¶ Loaded models: User, Chat, Message, UserSummary
2025-10-08 22:59:30 [info]: üîÑ Syncing database with alter...
2025-10-08 22:59:31 [error]: Failed to start server: foreign key constraint "Message_parentMessageId_fkey" cannot be implemented {
  "name": "SequelizeDatabaseError",
  "parent": {
    "length": 234,
    "name": "error",
    "severity": "ERROR",
    "code": "42804",
    "detail": "Key columns \"parentMessageId\" and \"id\" are of incompatible types: integer and uuid.",
    "file": "tablecmds.c",
    "line": "9489",
    "routine": "ATAddForeignKeyConstraint",
    "sql": "CREATE TABLE IF NOT EXISTS \"Message\" (\"id\"  SERIAL , \"chatId\" UUID NOT NULL REFERENCES \"Chat\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE, \"userId\" INTEGER REFERENCES \"User\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"role\" \"public\".\"enum_Message_role\" NOT NULL, \"content\" TEXT NOT NULL, \"model\" VARCHAR(50), \"tokens\" INTEGER DEFAULT 0, \"isEdited\" BOOLEAN DEFAULT false, \"editedAt\" TIMESTAMP WITH TIME ZONE, \"parentMessageId\" INTEGER REFERENCES \"Chat\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"feedback\" \"public\".\"enum_Message_feedback\", \"metadata\" JSON DEFAULT '{}', \"attachments\" JSON DEFAULT '[]', \"createdAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"updatedAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"deletedAt\" TIMESTAMP WITH TIME ZONE, PRIMARY KEY (\"id\"));"
  },
  "original": "[Circular Reference]",
  "sql": "CREATE TABLE IF NOT EXISTS \"Message\" (\"id\"  SERIAL , \"chatId\" UUID NOT NULL REFERENCES \"Chat\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE, \"userId\" INTEGER REFERENCES \"User\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"role\" \"public\".\"enum_Message_role\" NOT NULL, \"content\" TEXT NOT NULL, \"model\" VARCHAR(50), \"tokens\" INTEGER DEFAULT 0, \"isEdited\" BOOLEAN DEFAULT false, \"editedAt\" TIMESTAMP WITH TIME ZONE, \"parentMessageId\" INTEGER REFERENCES \"Chat\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"feedback\" \"public\".\"enum_Message_feedback\", \"metadata\" JSON DEFAULT '{}', \"attachments\" JSON DEFAULT '[]', \"createdAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"updatedAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"deletedAt\" TIMESTAMP WITH TIME ZONE, PRIMARY KEY (\"id\"));",
  "parameters": {},
  "stack": "Error\n    at Query.run (/app/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)\n    at /app/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PostgresQueryInterface.createTable (/app/node_modules/sequelize/lib/dialects/abstract/query-interface.js:98:12)\n    at async Message.sync (/app/node_modules/sequelize/lib/model.js:942:7)\n    at async Sequelize.sync (/app/node_modules/sequelize/lib/sequelize.js:377:9)\n    at async startServer (/app/server.js:290:13)"
}
2025-10-08 23:00:33 [info]: Google Gemini provider initialized
2025-10-08 23:00:33 [info]: Hugging Face provider initialized
2025-10-08 23:00:33 [info]: Rate limiting using Redis store
2025-10-08 23:00:33 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:00:33 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:00:33 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:00:33 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:00:33 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:00:33 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:00:33 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:00:33 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:00:33 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:00:33 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:00:33 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:00:33 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:00:33 [info]: Redis connected for rate limiting
2025-10-08 23:00:33 [info]: ‚úÖ Database connection established successfully
2025-10-08 23:00:33 [info]: üì¶ Loaded models: User, Chat, Message, UserSummary
2025-10-08 23:00:33 [info]: üîÑ Syncing database with alter...
2025-10-08 23:00:34 [error]: Failed to start server: foreign key constraint "Message_parentMessageId_fkey" cannot be implemented {
  "name": "SequelizeDatabaseError",
  "parent": {
    "length": 234,
    "name": "error",
    "severity": "ERROR",
    "code": "42804",
    "detail": "Key columns \"parentMessageId\" and \"id\" are of incompatible types: integer and uuid.",
    "file": "tablecmds.c",
    "line": "9489",
    "routine": "ATAddForeignKeyConstraint",
    "sql": "CREATE TABLE IF NOT EXISTS \"Message\" (\"id\"  SERIAL , \"chatId\" UUID NOT NULL REFERENCES \"Chat\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE, \"userId\" INTEGER REFERENCES \"User\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"role\" \"public\".\"enum_Message_role\" NOT NULL, \"content\" TEXT NOT NULL, \"model\" VARCHAR(50), \"tokens\" INTEGER DEFAULT 0, \"isEdited\" BOOLEAN DEFAULT false, \"editedAt\" TIMESTAMP WITH TIME ZONE, \"parentMessageId\" INTEGER REFERENCES \"Chat\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"feedback\" \"public\".\"enum_Message_feedback\", \"metadata\" JSON DEFAULT '{}', \"attachments\" JSON DEFAULT '[]', \"createdAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"updatedAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"deletedAt\" TIMESTAMP WITH TIME ZONE, PRIMARY KEY (\"id\"));"
  },
  "original": "[Circular Reference]",
  "sql": "CREATE TABLE IF NOT EXISTS \"Message\" (\"id\"  SERIAL , \"chatId\" UUID NOT NULL REFERENCES \"Chat\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE, \"userId\" INTEGER REFERENCES \"User\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"role\" \"public\".\"enum_Message_role\" NOT NULL, \"content\" TEXT NOT NULL, \"model\" VARCHAR(50), \"tokens\" INTEGER DEFAULT 0, \"isEdited\" BOOLEAN DEFAULT false, \"editedAt\" TIMESTAMP WITH TIME ZONE, \"parentMessageId\" INTEGER REFERENCES \"Chat\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"feedback\" \"public\".\"enum_Message_feedback\", \"metadata\" JSON DEFAULT '{}', \"attachments\" JSON DEFAULT '[]', \"createdAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"updatedAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"deletedAt\" TIMESTAMP WITH TIME ZONE, PRIMARY KEY (\"id\"));",
  "parameters": {},
  "stack": "Error\n    at Query.run (/app/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)\n    at /app/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PostgresQueryInterface.createTable (/app/node_modules/sequelize/lib/dialects/abstract/query-interface.js:98:12)\n    at async Message.sync (/app/node_modules/sequelize/lib/model.js:942:7)\n    at async Sequelize.sync (/app/node_modules/sequelize/lib/sequelize.js:377:9)\n    at async startServer (/app/server.js:290:13)"
}
2025-10-08 23:01:36 [info]: Google Gemini provider initialized
2025-10-08 23:01:36 [info]: Hugging Face provider initialized
2025-10-08 23:01:36 [info]: Rate limiting using Redis store
2025-10-08 23:01:36 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:01:36 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:01:36 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:01:36 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:01:36 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:01:36 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:01:36 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:01:36 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:01:36 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:01:36 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:01:36 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:01:36 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:01:36 [info]: Redis connected for rate limiting
2025-10-08 23:01:36 [info]: ‚úÖ Database connection established successfully
2025-10-08 23:01:36 [info]: üì¶ Loaded models: User, Chat, Message, UserSummary
2025-10-08 23:01:36 [info]: üîÑ Syncing database with alter...
2025-10-08 23:01:37 [error]: Failed to start server: foreign key constraint "Message_parentMessageId_fkey" cannot be implemented {
  "name": "SequelizeDatabaseError",
  "parent": {
    "length": 234,
    "name": "error",
    "severity": "ERROR",
    "code": "42804",
    "detail": "Key columns \"parentMessageId\" and \"id\" are of incompatible types: integer and uuid.",
    "file": "tablecmds.c",
    "line": "9489",
    "routine": "ATAddForeignKeyConstraint",
    "sql": "CREATE TABLE IF NOT EXISTS \"Message\" (\"id\"  SERIAL , \"chatId\" UUID NOT NULL REFERENCES \"Chat\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE, \"userId\" INTEGER REFERENCES \"User\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"role\" \"public\".\"enum_Message_role\" NOT NULL, \"content\" TEXT NOT NULL, \"model\" VARCHAR(50), \"tokens\" INTEGER DEFAULT 0, \"isEdited\" BOOLEAN DEFAULT false, \"editedAt\" TIMESTAMP WITH TIME ZONE, \"parentMessageId\" INTEGER REFERENCES \"Chat\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"feedback\" \"public\".\"enum_Message_feedback\", \"metadata\" JSON DEFAULT '{}', \"attachments\" JSON DEFAULT '[]', \"createdAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"updatedAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"deletedAt\" TIMESTAMP WITH TIME ZONE, PRIMARY KEY (\"id\"));"
  },
  "original": "[Circular Reference]",
  "sql": "CREATE TABLE IF NOT EXISTS \"Message\" (\"id\"  SERIAL , \"chatId\" UUID NOT NULL REFERENCES \"Chat\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE, \"userId\" INTEGER REFERENCES \"User\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"role\" \"public\".\"enum_Message_role\" NOT NULL, \"content\" TEXT NOT NULL, \"model\" VARCHAR(50), \"tokens\" INTEGER DEFAULT 0, \"isEdited\" BOOLEAN DEFAULT false, \"editedAt\" TIMESTAMP WITH TIME ZONE, \"parentMessageId\" INTEGER REFERENCES \"Chat\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"feedback\" \"public\".\"enum_Message_feedback\", \"metadata\" JSON DEFAULT '{}', \"attachments\" JSON DEFAULT '[]', \"createdAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"updatedAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"deletedAt\" TIMESTAMP WITH TIME ZONE, PRIMARY KEY (\"id\"));",
  "parameters": {},
  "stack": "Error\n    at Query.run (/app/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)\n    at /app/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PostgresQueryInterface.createTable (/app/node_modules/sequelize/lib/dialects/abstract/query-interface.js:98:12)\n    at async Message.sync (/app/node_modules/sequelize/lib/model.js:942:7)\n    at async Sequelize.sync (/app/node_modules/sequelize/lib/sequelize.js:377:9)\n    at async startServer (/app/server.js:290:13)"
}
2025-10-08 23:02:39 [info]: Google Gemini provider initialized
2025-10-08 23:02:39 [info]: Hugging Face provider initialized
2025-10-08 23:02:39 [info]: Rate limiting using Redis store
2025-10-08 23:02:39 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:02:39 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:02:39 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:02:39 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:02:39 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:02:39 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:02:39 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:02:39 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:02:39 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:02:39 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:02:39 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:02:39 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:02:39 [info]: Redis connected for rate limiting
2025-10-08 23:02:39 [info]: ‚úÖ Database connection established successfully
2025-10-08 23:02:39 [info]: üì¶ Loaded models: User, Chat, Message, UserSummary
2025-10-08 23:02:39 [info]: üîÑ Syncing database with alter...
2025-10-08 23:02:40 [error]: Failed to start server: foreign key constraint "Message_parentMessageId_fkey" cannot be implemented {
  "name": "SequelizeDatabaseError",
  "parent": {
    "length": 234,
    "name": "error",
    "severity": "ERROR",
    "code": "42804",
    "detail": "Key columns \"parentMessageId\" and \"id\" are of incompatible types: integer and uuid.",
    "file": "tablecmds.c",
    "line": "9489",
    "routine": "ATAddForeignKeyConstraint",
    "sql": "CREATE TABLE IF NOT EXISTS \"Message\" (\"id\"  SERIAL , \"chatId\" UUID NOT NULL REFERENCES \"Chat\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE, \"userId\" INTEGER REFERENCES \"User\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"role\" \"public\".\"enum_Message_role\" NOT NULL, \"content\" TEXT NOT NULL, \"model\" VARCHAR(50), \"tokens\" INTEGER DEFAULT 0, \"isEdited\" BOOLEAN DEFAULT false, \"editedAt\" TIMESTAMP WITH TIME ZONE, \"parentMessageId\" INTEGER REFERENCES \"Chat\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"feedback\" \"public\".\"enum_Message_feedback\", \"metadata\" JSON DEFAULT '{}', \"attachments\" JSON DEFAULT '[]', \"createdAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"updatedAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"deletedAt\" TIMESTAMP WITH TIME ZONE, PRIMARY KEY (\"id\"));"
  },
  "original": "[Circular Reference]",
  "sql": "CREATE TABLE IF NOT EXISTS \"Message\" (\"id\"  SERIAL , \"chatId\" UUID NOT NULL REFERENCES \"Chat\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE, \"userId\" INTEGER REFERENCES \"User\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"role\" \"public\".\"enum_Message_role\" NOT NULL, \"content\" TEXT NOT NULL, \"model\" VARCHAR(50), \"tokens\" INTEGER DEFAULT 0, \"isEdited\" BOOLEAN DEFAULT false, \"editedAt\" TIMESTAMP WITH TIME ZONE, \"parentMessageId\" INTEGER REFERENCES \"Chat\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"feedback\" \"public\".\"enum_Message_feedback\", \"metadata\" JSON DEFAULT '{}', \"attachments\" JSON DEFAULT '[]', \"createdAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"updatedAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"deletedAt\" TIMESTAMP WITH TIME ZONE, PRIMARY KEY (\"id\"));",
  "parameters": {},
  "stack": "Error\n    at Query.run (/app/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)\n    at /app/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PostgresQueryInterface.createTable (/app/node_modules/sequelize/lib/dialects/abstract/query-interface.js:98:12)\n    at async Message.sync (/app/node_modules/sequelize/lib/model.js:942:7)\n    at async Sequelize.sync (/app/node_modules/sequelize/lib/sequelize.js:377:9)\n    at async startServer (/app/server.js:290:13)"
}
2025-10-08 23:03:42 [info]: Google Gemini provider initialized
2025-10-08 23:03:42 [info]: Hugging Face provider initialized
2025-10-08 23:03:42 [info]: Rate limiting using Redis store
2025-10-08 23:03:42 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:03:42 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:03:42 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:03:42 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:03:42 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:03:42 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:03:42 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:03:42 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:03:42 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:03:42 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:03:42 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:03:42 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:03:42 [info]: Redis connected for rate limiting
2025-10-08 23:03:42 [info]: ‚úÖ Database connection established successfully
2025-10-08 23:03:42 [info]: üì¶ Loaded models: User, Chat, Message, UserSummary
2025-10-08 23:03:42 [info]: üîÑ Syncing database with alter...
2025-10-08 23:03:43 [error]: Failed to start server: foreign key constraint "Message_parentMessageId_fkey" cannot be implemented {
  "name": "SequelizeDatabaseError",
  "parent": {
    "length": 234,
    "name": "error",
    "severity": "ERROR",
    "code": "42804",
    "detail": "Key columns \"parentMessageId\" and \"id\" are of incompatible types: integer and uuid.",
    "file": "tablecmds.c",
    "line": "9489",
    "routine": "ATAddForeignKeyConstraint",
    "sql": "CREATE TABLE IF NOT EXISTS \"Message\" (\"id\"  SERIAL , \"chatId\" UUID NOT NULL REFERENCES \"Chat\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE, \"userId\" INTEGER REFERENCES \"User\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"role\" \"public\".\"enum_Message_role\" NOT NULL, \"content\" TEXT NOT NULL, \"model\" VARCHAR(50), \"tokens\" INTEGER DEFAULT 0, \"isEdited\" BOOLEAN DEFAULT false, \"editedAt\" TIMESTAMP WITH TIME ZONE, \"parentMessageId\" INTEGER REFERENCES \"Chat\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"feedback\" \"public\".\"enum_Message_feedback\", \"metadata\" JSON DEFAULT '{}', \"attachments\" JSON DEFAULT '[]', \"createdAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"updatedAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"deletedAt\" TIMESTAMP WITH TIME ZONE, PRIMARY KEY (\"id\"));"
  },
  "original": "[Circular Reference]",
  "sql": "CREATE TABLE IF NOT EXISTS \"Message\" (\"id\"  SERIAL , \"chatId\" UUID NOT NULL REFERENCES \"Chat\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE, \"userId\" INTEGER REFERENCES \"User\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"role\" \"public\".\"enum_Message_role\" NOT NULL, \"content\" TEXT NOT NULL, \"model\" VARCHAR(50), \"tokens\" INTEGER DEFAULT 0, \"isEdited\" BOOLEAN DEFAULT false, \"editedAt\" TIMESTAMP WITH TIME ZONE, \"parentMessageId\" INTEGER REFERENCES \"Chat\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"feedback\" \"public\".\"enum_Message_feedback\", \"metadata\" JSON DEFAULT '{}', \"attachments\" JSON DEFAULT '[]', \"createdAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"updatedAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"deletedAt\" TIMESTAMP WITH TIME ZONE, PRIMARY KEY (\"id\"));",
  "parameters": {},
  "stack": "Error\n    at Query.run (/app/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)\n    at /app/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PostgresQueryInterface.createTable (/app/node_modules/sequelize/lib/dialects/abstract/query-interface.js:98:12)\n    at async Message.sync (/app/node_modules/sequelize/lib/model.js:942:7)\n    at async Sequelize.sync (/app/node_modules/sequelize/lib/sequelize.js:377:9)\n    at async startServer (/app/server.js:290:13)"
}
2025-10-08 23:04:45 [info]: Google Gemini provider initialized
2025-10-08 23:04:45 [info]: Hugging Face provider initialized
2025-10-08 23:04:45 [info]: Rate limiting using Redis store
2025-10-08 23:04:45 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:04:45 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:04:45 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:04:45 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:04:45 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:04:45 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:04:45 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:04:45 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:04:45 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:04:45 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:04:45 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:04:45 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:04:45 [info]: Redis connected for rate limiting
2025-10-08 23:04:45 [info]: ‚úÖ Database connection established successfully
2025-10-08 23:04:45 [info]: üì¶ Loaded models: User, Chat, Message, UserSummary
2025-10-08 23:04:45 [info]: üîÑ Syncing database with alter...
2025-10-08 23:04:46 [error]: Failed to start server: foreign key constraint "Message_parentMessageId_fkey" cannot be implemented {
  "name": "SequelizeDatabaseError",
  "parent": {
    "length": 234,
    "name": "error",
    "severity": "ERROR",
    "code": "42804",
    "detail": "Key columns \"parentMessageId\" and \"id\" are of incompatible types: integer and uuid.",
    "file": "tablecmds.c",
    "line": "9489",
    "routine": "ATAddForeignKeyConstraint",
    "sql": "CREATE TABLE IF NOT EXISTS \"Message\" (\"id\"  SERIAL , \"chatId\" UUID NOT NULL REFERENCES \"Chat\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE, \"userId\" INTEGER REFERENCES \"User\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"role\" \"public\".\"enum_Message_role\" NOT NULL, \"content\" TEXT NOT NULL, \"model\" VARCHAR(50), \"tokens\" INTEGER DEFAULT 0, \"isEdited\" BOOLEAN DEFAULT false, \"editedAt\" TIMESTAMP WITH TIME ZONE, \"parentMessageId\" INTEGER REFERENCES \"Chat\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"feedback\" \"public\".\"enum_Message_feedback\", \"metadata\" JSON DEFAULT '{}', \"attachments\" JSON DEFAULT '[]', \"createdAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"updatedAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"deletedAt\" TIMESTAMP WITH TIME ZONE, PRIMARY KEY (\"id\"));"
  },
  "original": "[Circular Reference]",
  "sql": "CREATE TABLE IF NOT EXISTS \"Message\" (\"id\"  SERIAL , \"chatId\" UUID NOT NULL REFERENCES \"Chat\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE, \"userId\" INTEGER REFERENCES \"User\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"role\" \"public\".\"enum_Message_role\" NOT NULL, \"content\" TEXT NOT NULL, \"model\" VARCHAR(50), \"tokens\" INTEGER DEFAULT 0, \"isEdited\" BOOLEAN DEFAULT false, \"editedAt\" TIMESTAMP WITH TIME ZONE, \"parentMessageId\" INTEGER REFERENCES \"Chat\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"feedback\" \"public\".\"enum_Message_feedback\", \"metadata\" JSON DEFAULT '{}', \"attachments\" JSON DEFAULT '[]', \"createdAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"updatedAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"deletedAt\" TIMESTAMP WITH TIME ZONE, PRIMARY KEY (\"id\"));",
  "parameters": {},
  "stack": "Error\n    at Query.run (/app/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)\n    at /app/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PostgresQueryInterface.createTable (/app/node_modules/sequelize/lib/dialects/abstract/query-interface.js:98:12)\n    at async Message.sync (/app/node_modules/sequelize/lib/model.js:942:7)\n    at async Sequelize.sync (/app/node_modules/sequelize/lib/sequelize.js:377:9)\n    at async startServer (/app/server.js:290:13)"
}
2025-10-08 23:05:48 [info]: Google Gemini provider initialized
2025-10-08 23:05:48 [info]: Hugging Face provider initialized
2025-10-08 23:05:48 [info]: Rate limiting using Redis store
2025-10-08 23:05:48 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:05:48 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:05:48 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:05:48 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:05:48 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:05:48 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:05:48 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:05:48 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:05:48 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:05:48 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:05:48 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:05:48 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:05:48 [info]: Redis connected for rate limiting
2025-10-08 23:05:48 [info]: ‚úÖ Database connection established successfully
2025-10-08 23:05:48 [info]: üì¶ Loaded models: User, Chat, Message, UserSummary
2025-10-08 23:05:48 [info]: üîÑ Syncing database with alter...
2025-10-08 23:05:49 [error]: Failed to start server: foreign key constraint "Message_parentMessageId_fkey" cannot be implemented {
  "name": "SequelizeDatabaseError",
  "parent": {
    "length": 234,
    "name": "error",
    "severity": "ERROR",
    "code": "42804",
    "detail": "Key columns \"parentMessageId\" and \"id\" are of incompatible types: integer and uuid.",
    "file": "tablecmds.c",
    "line": "9489",
    "routine": "ATAddForeignKeyConstraint",
    "sql": "CREATE TABLE IF NOT EXISTS \"Message\" (\"id\"  SERIAL , \"chatId\" UUID NOT NULL REFERENCES \"Chat\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE, \"userId\" INTEGER REFERENCES \"User\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"role\" \"public\".\"enum_Message_role\" NOT NULL, \"content\" TEXT NOT NULL, \"model\" VARCHAR(50), \"tokens\" INTEGER DEFAULT 0, \"isEdited\" BOOLEAN DEFAULT false, \"editedAt\" TIMESTAMP WITH TIME ZONE, \"parentMessageId\" INTEGER REFERENCES \"Chat\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"feedback\" \"public\".\"enum_Message_feedback\", \"metadata\" JSON DEFAULT '{}', \"attachments\" JSON DEFAULT '[]', \"createdAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"updatedAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"deletedAt\" TIMESTAMP WITH TIME ZONE, PRIMARY KEY (\"id\"));"
  },
  "original": "[Circular Reference]",
  "sql": "CREATE TABLE IF NOT EXISTS \"Message\" (\"id\"  SERIAL , \"chatId\" UUID NOT NULL REFERENCES \"Chat\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE, \"userId\" INTEGER REFERENCES \"User\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"role\" \"public\".\"enum_Message_role\" NOT NULL, \"content\" TEXT NOT NULL, \"model\" VARCHAR(50), \"tokens\" INTEGER DEFAULT 0, \"isEdited\" BOOLEAN DEFAULT false, \"editedAt\" TIMESTAMP WITH TIME ZONE, \"parentMessageId\" INTEGER REFERENCES \"Chat\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"feedback\" \"public\".\"enum_Message_feedback\", \"metadata\" JSON DEFAULT '{}', \"attachments\" JSON DEFAULT '[]', \"createdAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"updatedAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"deletedAt\" TIMESTAMP WITH TIME ZONE, PRIMARY KEY (\"id\"));",
  "parameters": {},
  "stack": "Error\n    at Query.run (/app/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)\n    at /app/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PostgresQueryInterface.createTable (/app/node_modules/sequelize/lib/dialects/abstract/query-interface.js:98:12)\n    at async Message.sync (/app/node_modules/sequelize/lib/model.js:942:7)\n    at async Sequelize.sync (/app/node_modules/sequelize/lib/sequelize.js:377:9)\n    at async startServer (/app/server.js:290:13)"
}
2025-10-08 23:06:51 [info]: Google Gemini provider initialized
2025-10-08 23:06:51 [info]: Hugging Face provider initialized
2025-10-08 23:06:51 [info]: Rate limiting using Redis store
2025-10-08 23:06:51 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:06:51 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:06:51 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:06:51 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:06:51 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:06:51 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:06:51 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:06:51 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:06:51 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:06:51 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:06:51 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:06:51 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:06:51 [info]: Redis connected for rate limiting
2025-10-08 23:06:51 [info]: ‚úÖ Database connection established successfully
2025-10-08 23:06:51 [info]: üì¶ Loaded models: User, Chat, Message, UserSummary
2025-10-08 23:06:51 [info]: üîÑ Syncing database with alter...
2025-10-08 23:06:52 [error]: Failed to start server: foreign key constraint "Message_parentMessageId_fkey" cannot be implemented {
  "name": "SequelizeDatabaseError",
  "parent": {
    "length": 234,
    "name": "error",
    "severity": "ERROR",
    "code": "42804",
    "detail": "Key columns \"parentMessageId\" and \"id\" are of incompatible types: integer and uuid.",
    "file": "tablecmds.c",
    "line": "9489",
    "routine": "ATAddForeignKeyConstraint",
    "sql": "CREATE TABLE IF NOT EXISTS \"Message\" (\"id\"  SERIAL , \"chatId\" UUID NOT NULL REFERENCES \"Chat\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE, \"userId\" INTEGER REFERENCES \"User\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"role\" \"public\".\"enum_Message_role\" NOT NULL, \"content\" TEXT NOT NULL, \"model\" VARCHAR(50), \"tokens\" INTEGER DEFAULT 0, \"isEdited\" BOOLEAN DEFAULT false, \"editedAt\" TIMESTAMP WITH TIME ZONE, \"parentMessageId\" INTEGER REFERENCES \"Chat\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"feedback\" \"public\".\"enum_Message_feedback\", \"metadata\" JSON DEFAULT '{}', \"attachments\" JSON DEFAULT '[]', \"createdAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"updatedAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"deletedAt\" TIMESTAMP WITH TIME ZONE, PRIMARY KEY (\"id\"));"
  },
  "original": "[Circular Reference]",
  "sql": "CREATE TABLE IF NOT EXISTS \"Message\" (\"id\"  SERIAL , \"chatId\" UUID NOT NULL REFERENCES \"Chat\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE, \"userId\" INTEGER REFERENCES \"User\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"role\" \"public\".\"enum_Message_role\" NOT NULL, \"content\" TEXT NOT NULL, \"model\" VARCHAR(50), \"tokens\" INTEGER DEFAULT 0, \"isEdited\" BOOLEAN DEFAULT false, \"editedAt\" TIMESTAMP WITH TIME ZONE, \"parentMessageId\" INTEGER REFERENCES \"Chat\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"feedback\" \"public\".\"enum_Message_feedback\", \"metadata\" JSON DEFAULT '{}', \"attachments\" JSON DEFAULT '[]', \"createdAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"updatedAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"deletedAt\" TIMESTAMP WITH TIME ZONE, PRIMARY KEY (\"id\"));",
  "parameters": {},
  "stack": "Error\n    at Query.run (/app/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)\n    at /app/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PostgresQueryInterface.createTable (/app/node_modules/sequelize/lib/dialects/abstract/query-interface.js:98:12)\n    at async Message.sync (/app/node_modules/sequelize/lib/model.js:942:7)\n    at async Sequelize.sync (/app/node_modules/sequelize/lib/sequelize.js:377:9)\n    at async startServer (/app/server.js:290:13)"
}
2025-10-08 23:07:54 [info]: Google Gemini provider initialized
2025-10-08 23:07:54 [info]: Hugging Face provider initialized
2025-10-08 23:07:54 [info]: Rate limiting using Redis store
2025-10-08 23:07:55 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:07:55 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:07:55 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:07:55 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:07:55 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:07:55 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:07:55 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:07:55 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:07:55 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:07:55 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:07:55 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:07:55 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:07:55 [info]: Redis connected for rate limiting
2025-10-08 23:07:55 [info]: ‚úÖ Database connection established successfully
2025-10-08 23:07:55 [info]: üì¶ Loaded models: User, Chat, Message, UserSummary
2025-10-08 23:07:55 [info]: üîÑ Syncing database with alter...
2025-10-08 23:07:55 [error]: Failed to start server: foreign key constraint "Message_parentMessageId_fkey" cannot be implemented {
  "name": "SequelizeDatabaseError",
  "parent": {
    "length": 234,
    "name": "error",
    "severity": "ERROR",
    "code": "42804",
    "detail": "Key columns \"parentMessageId\" and \"id\" are of incompatible types: integer and uuid.",
    "file": "tablecmds.c",
    "line": "9489",
    "routine": "ATAddForeignKeyConstraint",
    "sql": "CREATE TABLE IF NOT EXISTS \"Message\" (\"id\"  SERIAL , \"chatId\" UUID NOT NULL REFERENCES \"Chat\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE, \"userId\" INTEGER REFERENCES \"User\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"role\" \"public\".\"enum_Message_role\" NOT NULL, \"content\" TEXT NOT NULL, \"model\" VARCHAR(50), \"tokens\" INTEGER DEFAULT 0, \"isEdited\" BOOLEAN DEFAULT false, \"editedAt\" TIMESTAMP WITH TIME ZONE, \"parentMessageId\" INTEGER REFERENCES \"Chat\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"feedback\" \"public\".\"enum_Message_feedback\", \"metadata\" JSON DEFAULT '{}', \"attachments\" JSON DEFAULT '[]', \"createdAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"updatedAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"deletedAt\" TIMESTAMP WITH TIME ZONE, PRIMARY KEY (\"id\"));"
  },
  "original": "[Circular Reference]",
  "sql": "CREATE TABLE IF NOT EXISTS \"Message\" (\"id\"  SERIAL , \"chatId\" UUID NOT NULL REFERENCES \"Chat\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE, \"userId\" INTEGER REFERENCES \"User\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"role\" \"public\".\"enum_Message_role\" NOT NULL, \"content\" TEXT NOT NULL, \"model\" VARCHAR(50), \"tokens\" INTEGER DEFAULT 0, \"isEdited\" BOOLEAN DEFAULT false, \"editedAt\" TIMESTAMP WITH TIME ZONE, \"parentMessageId\" INTEGER REFERENCES \"Chat\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"feedback\" \"public\".\"enum_Message_feedback\", \"metadata\" JSON DEFAULT '{}', \"attachments\" JSON DEFAULT '[]', \"createdAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"updatedAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"deletedAt\" TIMESTAMP WITH TIME ZONE, PRIMARY KEY (\"id\"));",
  "parameters": {},
  "stack": "Error\n    at Query.run (/app/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)\n    at /app/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PostgresQueryInterface.createTable (/app/node_modules/sequelize/lib/dialects/abstract/query-interface.js:98:12)\n    at async Message.sync (/app/node_modules/sequelize/lib/model.js:942:7)\n    at async Sequelize.sync (/app/node_modules/sequelize/lib/sequelize.js:377:9)\n    at async startServer (/app/server.js:290:13)"
}
2025-10-08 23:08:58 [info]: Google Gemini provider initialized
2025-10-08 23:08:58 [info]: Hugging Face provider initialized
2025-10-08 23:08:58 [info]: Rate limiting using Redis store
2025-10-08 23:08:58 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:08:58 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:08:58 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:08:58 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:08:58 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:08:58 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:08:58 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:08:58 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:08:58 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:08:58 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:08:58 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:08:58 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:08:58 [info]: Redis connected for rate limiting
2025-10-08 23:08:58 [info]: ‚úÖ Database connection established successfully
2025-10-08 23:08:58 [info]: üì¶ Loaded models: User, Chat, Message, UserSummary
2025-10-08 23:08:58 [info]: üîÑ Syncing database with alter...
2025-10-08 23:08:58 [error]: Failed to start server: foreign key constraint "Message_parentMessageId_fkey" cannot be implemented {
  "name": "SequelizeDatabaseError",
  "parent": {
    "length": 234,
    "name": "error",
    "severity": "ERROR",
    "code": "42804",
    "detail": "Key columns \"parentMessageId\" and \"id\" are of incompatible types: integer and uuid.",
    "file": "tablecmds.c",
    "line": "9489",
    "routine": "ATAddForeignKeyConstraint",
    "sql": "CREATE TABLE IF NOT EXISTS \"Message\" (\"id\"  SERIAL , \"chatId\" UUID NOT NULL REFERENCES \"Chat\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE, \"userId\" INTEGER REFERENCES \"User\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"role\" \"public\".\"enum_Message_role\" NOT NULL, \"content\" TEXT NOT NULL, \"model\" VARCHAR(50), \"tokens\" INTEGER DEFAULT 0, \"isEdited\" BOOLEAN DEFAULT false, \"editedAt\" TIMESTAMP WITH TIME ZONE, \"parentMessageId\" INTEGER REFERENCES \"Chat\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"feedback\" \"public\".\"enum_Message_feedback\", \"metadata\" JSON DEFAULT '{}', \"attachments\" JSON DEFAULT '[]', \"createdAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"updatedAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"deletedAt\" TIMESTAMP WITH TIME ZONE, PRIMARY KEY (\"id\"));"
  },
  "original": "[Circular Reference]",
  "sql": "CREATE TABLE IF NOT EXISTS \"Message\" (\"id\"  SERIAL , \"chatId\" UUID NOT NULL REFERENCES \"Chat\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE, \"userId\" INTEGER REFERENCES \"User\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"role\" \"public\".\"enum_Message_role\" NOT NULL, \"content\" TEXT NOT NULL, \"model\" VARCHAR(50), \"tokens\" INTEGER DEFAULT 0, \"isEdited\" BOOLEAN DEFAULT false, \"editedAt\" TIMESTAMP WITH TIME ZONE, \"parentMessageId\" INTEGER REFERENCES \"Chat\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"feedback\" \"public\".\"enum_Message_feedback\", \"metadata\" JSON DEFAULT '{}', \"attachments\" JSON DEFAULT '[]', \"createdAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"updatedAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"deletedAt\" TIMESTAMP WITH TIME ZONE, PRIMARY KEY (\"id\"));",
  "parameters": {},
  "stack": "Error\n    at Query.run (/app/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)\n    at /app/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PostgresQueryInterface.createTable (/app/node_modules/sequelize/lib/dialects/abstract/query-interface.js:98:12)\n    at async Message.sync (/app/node_modules/sequelize/lib/model.js:942:7)\n    at async Sequelize.sync (/app/node_modules/sequelize/lib/sequelize.js:377:9)\n    at async startServer (/app/server.js:290:13)"
}
2025-10-08 23:10:01 [info]: Google Gemini provider initialized
2025-10-08 23:10:01 [info]: Hugging Face provider initialized
2025-10-08 23:10:01 [info]: Rate limiting using Redis store
2025-10-08 23:10:01 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:10:01 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:10:01 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:10:01 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:10:01 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:10:01 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:10:01 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:10:01 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:10:01 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:10:01 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:10:01 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:10:01 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:10:01 [info]: Redis connected for rate limiting
2025-10-08 23:10:01 [info]: ‚úÖ Database connection established successfully
2025-10-08 23:10:01 [info]: üì¶ Loaded models: User, Chat, Message, UserSummary
2025-10-08 23:10:01 [info]: üîÑ Syncing database with alter...
2025-10-08 23:10:02 [error]: Failed to start server: foreign key constraint "Message_parentMessageId_fkey" cannot be implemented {
  "name": "SequelizeDatabaseError",
  "parent": {
    "length": 234,
    "name": "error",
    "severity": "ERROR",
    "code": "42804",
    "detail": "Key columns \"parentMessageId\" and \"id\" are of incompatible types: integer and uuid.",
    "file": "tablecmds.c",
    "line": "9489",
    "routine": "ATAddForeignKeyConstraint",
    "sql": "CREATE TABLE IF NOT EXISTS \"Message\" (\"id\"  SERIAL , \"chatId\" UUID NOT NULL REFERENCES \"Chat\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE, \"userId\" INTEGER REFERENCES \"User\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"role\" \"public\".\"enum_Message_role\" NOT NULL, \"content\" TEXT NOT NULL, \"model\" VARCHAR(50), \"tokens\" INTEGER DEFAULT 0, \"isEdited\" BOOLEAN DEFAULT false, \"editedAt\" TIMESTAMP WITH TIME ZONE, \"parentMessageId\" INTEGER REFERENCES \"Chat\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"feedback\" \"public\".\"enum_Message_feedback\", \"metadata\" JSON DEFAULT '{}', \"attachments\" JSON DEFAULT '[]', \"createdAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"updatedAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"deletedAt\" TIMESTAMP WITH TIME ZONE, PRIMARY KEY (\"id\"));"
  },
  "original": "[Circular Reference]",
  "sql": "CREATE TABLE IF NOT EXISTS \"Message\" (\"id\"  SERIAL , \"chatId\" UUID NOT NULL REFERENCES \"Chat\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE, \"userId\" INTEGER REFERENCES \"User\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"role\" \"public\".\"enum_Message_role\" NOT NULL, \"content\" TEXT NOT NULL, \"model\" VARCHAR(50), \"tokens\" INTEGER DEFAULT 0, \"isEdited\" BOOLEAN DEFAULT false, \"editedAt\" TIMESTAMP WITH TIME ZONE, \"parentMessageId\" INTEGER REFERENCES \"Chat\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"feedback\" \"public\".\"enum_Message_feedback\", \"metadata\" JSON DEFAULT '{}', \"attachments\" JSON DEFAULT '[]', \"createdAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"updatedAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"deletedAt\" TIMESTAMP WITH TIME ZONE, PRIMARY KEY (\"id\"));",
  "parameters": {},
  "stack": "Error\n    at Query.run (/app/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)\n    at /app/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PostgresQueryInterface.createTable (/app/node_modules/sequelize/lib/dialects/abstract/query-interface.js:98:12)\n    at async Message.sync (/app/node_modules/sequelize/lib/model.js:942:7)\n    at async Sequelize.sync (/app/node_modules/sequelize/lib/sequelize.js:377:9)\n    at async startServer (/app/server.js:290:13)"
}
2025-10-08 23:11:04 [info]: Google Gemini provider initialized
2025-10-08 23:11:04 [info]: Hugging Face provider initialized
2025-10-08 23:11:04 [info]: Rate limiting using Redis store
2025-10-08 23:11:04 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:11:04 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:11:04 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:11:04 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:11:04 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:11:04 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:11:04 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:11:04 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:11:04 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:11:04 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:11:04 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:11:04 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:11:04 [info]: Redis connected for rate limiting
2025-10-08 23:11:04 [info]: ‚úÖ Database connection established successfully
2025-10-08 23:11:04 [info]: üì¶ Loaded models: User, Chat, Message, UserSummary
2025-10-08 23:11:04 [info]: üîÑ Syncing database with alter...
2025-10-08 23:11:05 [error]: Failed to start server: foreign key constraint "Message_parentMessageId_fkey" cannot be implemented {
  "name": "SequelizeDatabaseError",
  "parent": {
    "length": 234,
    "name": "error",
    "severity": "ERROR",
    "code": "42804",
    "detail": "Key columns \"parentMessageId\" and \"id\" are of incompatible types: integer and uuid.",
    "file": "tablecmds.c",
    "line": "9489",
    "routine": "ATAddForeignKeyConstraint",
    "sql": "CREATE TABLE IF NOT EXISTS \"Message\" (\"id\"  SERIAL , \"chatId\" UUID NOT NULL REFERENCES \"Chat\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE, \"userId\" INTEGER REFERENCES \"User\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"role\" \"public\".\"enum_Message_role\" NOT NULL, \"content\" TEXT NOT NULL, \"model\" VARCHAR(50), \"tokens\" INTEGER DEFAULT 0, \"isEdited\" BOOLEAN DEFAULT false, \"editedAt\" TIMESTAMP WITH TIME ZONE, \"parentMessageId\" INTEGER REFERENCES \"Chat\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"feedback\" \"public\".\"enum_Message_feedback\", \"metadata\" JSON DEFAULT '{}', \"attachments\" JSON DEFAULT '[]', \"createdAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"updatedAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"deletedAt\" TIMESTAMP WITH TIME ZONE, PRIMARY KEY (\"id\"));"
  },
  "original": "[Circular Reference]",
  "sql": "CREATE TABLE IF NOT EXISTS \"Message\" (\"id\"  SERIAL , \"chatId\" UUID NOT NULL REFERENCES \"Chat\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE, \"userId\" INTEGER REFERENCES \"User\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"role\" \"public\".\"enum_Message_role\" NOT NULL, \"content\" TEXT NOT NULL, \"model\" VARCHAR(50), \"tokens\" INTEGER DEFAULT 0, \"isEdited\" BOOLEAN DEFAULT false, \"editedAt\" TIMESTAMP WITH TIME ZONE, \"parentMessageId\" INTEGER REFERENCES \"Chat\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"feedback\" \"public\".\"enum_Message_feedback\", \"metadata\" JSON DEFAULT '{}', \"attachments\" JSON DEFAULT '[]', \"createdAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"updatedAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"deletedAt\" TIMESTAMP WITH TIME ZONE, PRIMARY KEY (\"id\"));",
  "parameters": {},
  "stack": "Error\n    at Query.run (/app/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)\n    at /app/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PostgresQueryInterface.createTable (/app/node_modules/sequelize/lib/dialects/abstract/query-interface.js:98:12)\n    at async Message.sync (/app/node_modules/sequelize/lib/model.js:942:7)\n    at async Sequelize.sync (/app/node_modules/sequelize/lib/sequelize.js:377:9)\n    at async startServer (/app/server.js:290:13)"
}
2025-10-08 23:12:07 [info]: Google Gemini provider initialized
2025-10-08 23:12:07 [info]: Hugging Face provider initialized
2025-10-08 23:12:07 [info]: Rate limiting using Redis store
2025-10-08 23:12:07 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:12:07 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:12:07 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:12:07 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:12:07 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:12:07 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:12:07 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:12:07 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:12:07 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:12:07 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:12:07 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:12:07 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:12:07 [info]: Redis connected for rate limiting
2025-10-08 23:12:07 [info]: ‚úÖ Database connection established successfully
2025-10-08 23:12:07 [info]: üì¶ Loaded models: User, Chat, Message, UserSummary
2025-10-08 23:12:07 [info]: üîÑ Syncing database with alter...
2025-10-08 23:12:08 [error]: Failed to start server: foreign key constraint "Message_parentMessageId_fkey" cannot be implemented {
  "name": "SequelizeDatabaseError",
  "parent": {
    "length": 234,
    "name": "error",
    "severity": "ERROR",
    "code": "42804",
    "detail": "Key columns \"parentMessageId\" and \"id\" are of incompatible types: integer and uuid.",
    "file": "tablecmds.c",
    "line": "9489",
    "routine": "ATAddForeignKeyConstraint",
    "sql": "CREATE TABLE IF NOT EXISTS \"Message\" (\"id\"  SERIAL , \"chatId\" UUID NOT NULL REFERENCES \"Chat\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE, \"userId\" INTEGER REFERENCES \"User\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"role\" \"public\".\"enum_Message_role\" NOT NULL, \"content\" TEXT NOT NULL, \"model\" VARCHAR(50), \"tokens\" INTEGER DEFAULT 0, \"isEdited\" BOOLEAN DEFAULT false, \"editedAt\" TIMESTAMP WITH TIME ZONE, \"parentMessageId\" INTEGER REFERENCES \"Chat\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"feedback\" \"public\".\"enum_Message_feedback\", \"metadata\" JSON DEFAULT '{}', \"attachments\" JSON DEFAULT '[]', \"createdAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"updatedAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"deletedAt\" TIMESTAMP WITH TIME ZONE, PRIMARY KEY (\"id\"));"
  },
  "original": "[Circular Reference]",
  "sql": "CREATE TABLE IF NOT EXISTS \"Message\" (\"id\"  SERIAL , \"chatId\" UUID NOT NULL REFERENCES \"Chat\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE, \"userId\" INTEGER REFERENCES \"User\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"role\" \"public\".\"enum_Message_role\" NOT NULL, \"content\" TEXT NOT NULL, \"model\" VARCHAR(50), \"tokens\" INTEGER DEFAULT 0, \"isEdited\" BOOLEAN DEFAULT false, \"editedAt\" TIMESTAMP WITH TIME ZONE, \"parentMessageId\" INTEGER REFERENCES \"Chat\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"feedback\" \"public\".\"enum_Message_feedback\", \"metadata\" JSON DEFAULT '{}', \"attachments\" JSON DEFAULT '[]', \"createdAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"updatedAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"deletedAt\" TIMESTAMP WITH TIME ZONE, PRIMARY KEY (\"id\"));",
  "parameters": {},
  "stack": "Error\n    at Query.run (/app/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)\n    at /app/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PostgresQueryInterface.createTable (/app/node_modules/sequelize/lib/dialects/abstract/query-interface.js:98:12)\n    at async Message.sync (/app/node_modules/sequelize/lib/model.js:942:7)\n    at async Sequelize.sync (/app/node_modules/sequelize/lib/sequelize.js:377:9)\n    at async startServer (/app/server.js:290:13)"
}
2025-10-08 23:13:10 [info]: Google Gemini provider initialized
2025-10-08 23:13:10 [info]: Hugging Face provider initialized
2025-10-08 23:13:11 [info]: Rate limiting using Redis store
2025-10-08 23:13:11 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:13:11 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:13:11 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:13:11 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:13:11 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:13:11 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:13:11 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:13:11 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:13:11 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:13:11 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:13:11 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:13:11 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:13:11 [info]: Redis connected for rate limiting
2025-10-08 23:13:11 [info]: ‚úÖ Database connection established successfully
2025-10-08 23:13:11 [info]: üì¶ Loaded models: User, Chat, Message, UserSummary
2025-10-08 23:13:11 [info]: üîÑ Syncing database with alter...
2025-10-08 23:13:12 [error]: Failed to start server: foreign key constraint "Message_parentMessageId_fkey" cannot be implemented {
  "name": "SequelizeDatabaseError",
  "parent": {
    "length": 234,
    "name": "error",
    "severity": "ERROR",
    "code": "42804",
    "detail": "Key columns \"parentMessageId\" and \"id\" are of incompatible types: integer and uuid.",
    "file": "tablecmds.c",
    "line": "9489",
    "routine": "ATAddForeignKeyConstraint",
    "sql": "CREATE TABLE IF NOT EXISTS \"Message\" (\"id\"  SERIAL , \"chatId\" UUID NOT NULL REFERENCES \"Chat\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE, \"userId\" INTEGER REFERENCES \"User\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"role\" \"public\".\"enum_Message_role\" NOT NULL, \"content\" TEXT NOT NULL, \"model\" VARCHAR(50), \"tokens\" INTEGER DEFAULT 0, \"isEdited\" BOOLEAN DEFAULT false, \"editedAt\" TIMESTAMP WITH TIME ZONE, \"parentMessageId\" INTEGER REFERENCES \"Chat\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"feedback\" \"public\".\"enum_Message_feedback\", \"metadata\" JSON DEFAULT '{}', \"attachments\" JSON DEFAULT '[]', \"createdAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"updatedAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"deletedAt\" TIMESTAMP WITH TIME ZONE, PRIMARY KEY (\"id\"));"
  },
  "original": "[Circular Reference]",
  "sql": "CREATE TABLE IF NOT EXISTS \"Message\" (\"id\"  SERIAL , \"chatId\" UUID NOT NULL REFERENCES \"Chat\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE, \"userId\" INTEGER REFERENCES \"User\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"role\" \"public\".\"enum_Message_role\" NOT NULL, \"content\" TEXT NOT NULL, \"model\" VARCHAR(50), \"tokens\" INTEGER DEFAULT 0, \"isEdited\" BOOLEAN DEFAULT false, \"editedAt\" TIMESTAMP WITH TIME ZONE, \"parentMessageId\" INTEGER REFERENCES \"Chat\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"feedback\" \"public\".\"enum_Message_feedback\", \"metadata\" JSON DEFAULT '{}', \"attachments\" JSON DEFAULT '[]', \"createdAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"updatedAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"deletedAt\" TIMESTAMP WITH TIME ZONE, PRIMARY KEY (\"id\"));",
  "parameters": {},
  "stack": "Error\n    at Query.run (/app/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)\n    at /app/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PostgresQueryInterface.createTable (/app/node_modules/sequelize/lib/dialects/abstract/query-interface.js:98:12)\n    at async Message.sync (/app/node_modules/sequelize/lib/model.js:942:7)\n    at async Sequelize.sync (/app/node_modules/sequelize/lib/sequelize.js:377:9)\n    at async startServer (/app/server.js:290:13)"
}
2025-10-08 23:14:14 [info]: Google Gemini provider initialized
2025-10-08 23:14:14 [info]: Hugging Face provider initialized
2025-10-08 23:14:14 [info]: Rate limiting using Redis store
2025-10-08 23:14:14 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:14:14 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:14:14 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:14:14 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:14:14 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:14:14 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:14:14 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:14:14 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:14:14 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:14:14 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:14:14 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:14:14 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:14:14 [info]: Redis connected for rate limiting
2025-10-08 23:14:14 [info]: ‚úÖ Database connection established successfully
2025-10-08 23:14:14 [info]: üì¶ Loaded models: User, Chat, Message, UserSummary
2025-10-08 23:14:14 [info]: üîÑ Syncing database with alter...
2025-10-08 23:14:15 [error]: Failed to start server: foreign key constraint "Message_parentMessageId_fkey" cannot be implemented {
  "name": "SequelizeDatabaseError",
  "parent": {
    "length": 234,
    "name": "error",
    "severity": "ERROR",
    "code": "42804",
    "detail": "Key columns \"parentMessageId\" and \"id\" are of incompatible types: integer and uuid.",
    "file": "tablecmds.c",
    "line": "9489",
    "routine": "ATAddForeignKeyConstraint",
    "sql": "CREATE TABLE IF NOT EXISTS \"Message\" (\"id\"  SERIAL , \"chatId\" UUID NOT NULL REFERENCES \"Chat\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE, \"userId\" INTEGER REFERENCES \"User\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"role\" \"public\".\"enum_Message_role\" NOT NULL, \"content\" TEXT NOT NULL, \"model\" VARCHAR(50), \"tokens\" INTEGER DEFAULT 0, \"isEdited\" BOOLEAN DEFAULT false, \"editedAt\" TIMESTAMP WITH TIME ZONE, \"parentMessageId\" INTEGER REFERENCES \"Chat\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"feedback\" \"public\".\"enum_Message_feedback\", \"metadata\" JSON DEFAULT '{}', \"attachments\" JSON DEFAULT '[]', \"createdAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"updatedAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"deletedAt\" TIMESTAMP WITH TIME ZONE, PRIMARY KEY (\"id\"));"
  },
  "original": "[Circular Reference]",
  "sql": "CREATE TABLE IF NOT EXISTS \"Message\" (\"id\"  SERIAL , \"chatId\" UUID NOT NULL REFERENCES \"Chat\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE, \"userId\" INTEGER REFERENCES \"User\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"role\" \"public\".\"enum_Message_role\" NOT NULL, \"content\" TEXT NOT NULL, \"model\" VARCHAR(50), \"tokens\" INTEGER DEFAULT 0, \"isEdited\" BOOLEAN DEFAULT false, \"editedAt\" TIMESTAMP WITH TIME ZONE, \"parentMessageId\" INTEGER REFERENCES \"Chat\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"feedback\" \"public\".\"enum_Message_feedback\", \"metadata\" JSON DEFAULT '{}', \"attachments\" JSON DEFAULT '[]', \"createdAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"updatedAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"deletedAt\" TIMESTAMP WITH TIME ZONE, PRIMARY KEY (\"id\"));",
  "parameters": {},
  "stack": "Error\n    at Query.run (/app/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)\n    at /app/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PostgresQueryInterface.createTable (/app/node_modules/sequelize/lib/dialects/abstract/query-interface.js:98:12)\n    at async Message.sync (/app/node_modules/sequelize/lib/model.js:942:7)\n    at async Sequelize.sync (/app/node_modules/sequelize/lib/sequelize.js:377:9)\n    at async startServer (/app/server.js:290:13)"
}
2025-10-08 23:15:18 [info]: Google Gemini provider initialized
2025-10-08 23:15:18 [info]: Hugging Face provider initialized
2025-10-08 23:15:18 [info]: Rate limiting using Redis store
2025-10-08 23:15:18 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:15:18 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:15:18 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:15:18 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:15:18 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:15:18 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:15:18 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:15:18 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:15:18 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:15:18 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:15:18 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:15:18 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:15:18 [info]: Redis connected for rate limiting
2025-10-08 23:15:18 [info]: ‚úÖ Database connection established successfully
2025-10-08 23:15:18 [info]: üì¶ Loaded models: User, Chat, Message, UserSummary
2025-10-08 23:15:18 [info]: üîÑ Syncing database with alter...
2025-10-08 23:15:19 [error]: Failed to start server: foreign key constraint "Message_parentMessageId_fkey" cannot be implemented {
  "name": "SequelizeDatabaseError",
  "parent": {
    "length": 234,
    "name": "error",
    "severity": "ERROR",
    "code": "42804",
    "detail": "Key columns \"parentMessageId\" and \"id\" are of incompatible types: integer and uuid.",
    "file": "tablecmds.c",
    "line": "9489",
    "routine": "ATAddForeignKeyConstraint",
    "sql": "CREATE TABLE IF NOT EXISTS \"Message\" (\"id\"  SERIAL , \"chatId\" UUID NOT NULL REFERENCES \"Chat\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE, \"userId\" INTEGER REFERENCES \"User\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"role\" \"public\".\"enum_Message_role\" NOT NULL, \"content\" TEXT NOT NULL, \"model\" VARCHAR(50), \"tokens\" INTEGER DEFAULT 0, \"isEdited\" BOOLEAN DEFAULT false, \"editedAt\" TIMESTAMP WITH TIME ZONE, \"parentMessageId\" INTEGER REFERENCES \"Chat\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"feedback\" \"public\".\"enum_Message_feedback\", \"metadata\" JSON DEFAULT '{}', \"attachments\" JSON DEFAULT '[]', \"createdAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"updatedAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"deletedAt\" TIMESTAMP WITH TIME ZONE, PRIMARY KEY (\"id\"));"
  },
  "original": "[Circular Reference]",
  "sql": "CREATE TABLE IF NOT EXISTS \"Message\" (\"id\"  SERIAL , \"chatId\" UUID NOT NULL REFERENCES \"Chat\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE, \"userId\" INTEGER REFERENCES \"User\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"role\" \"public\".\"enum_Message_role\" NOT NULL, \"content\" TEXT NOT NULL, \"model\" VARCHAR(50), \"tokens\" INTEGER DEFAULT 0, \"isEdited\" BOOLEAN DEFAULT false, \"editedAt\" TIMESTAMP WITH TIME ZONE, \"parentMessageId\" INTEGER REFERENCES \"Chat\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"feedback\" \"public\".\"enum_Message_feedback\", \"metadata\" JSON DEFAULT '{}', \"attachments\" JSON DEFAULT '[]', \"createdAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"updatedAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"deletedAt\" TIMESTAMP WITH TIME ZONE, PRIMARY KEY (\"id\"));",
  "parameters": {},
  "stack": "Error\n    at Query.run (/app/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)\n    at /app/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PostgresQueryInterface.createTable (/app/node_modules/sequelize/lib/dialects/abstract/query-interface.js:98:12)\n    at async Message.sync (/app/node_modules/sequelize/lib/model.js:942:7)\n    at async Sequelize.sync (/app/node_modules/sequelize/lib/sequelize.js:377:9)\n    at async startServer (/app/server.js:290:13)"
}
2025-10-08 23:20:32 [info]: Database directory created
2025-10-08 23:20:33 [info]: Google Gemini provider initialized
2025-10-08 23:20:33 [info]: Hugging Face provider initialized
2025-10-08 23:20:33 [info]: Rate limiting using Redis store
2025-10-08 23:20:33 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:20:33 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:20:33 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:20:33 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:20:33 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:20:33 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:20:33 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:20:33 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:20:33 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:20:33 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:20:33 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:20:33 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:20:33 [info]: Redis connected for rate limiting
2025-10-08 23:20:33 [info]: ‚úÖ Database connection established successfully
2025-10-08 23:20:33 [info]: üì¶ Loaded models: User, Chat, Message, UserSummary
2025-10-08 23:20:33 [info]: üîÑ Syncing database with alter...
2025-10-08 23:20:34 [error]: Failed to start server: relation "Messages" does not exist {
  "name": "SequelizeDatabaseError",
  "parent": {
    "length": 106,
    "name": "error",
    "severity": "ERROR",
    "code": "42P01",
    "file": "namespace.c",
    "line": "433",
    "routine": "RangeVarGetRelidExtended",
    "sql": "CREATE TABLE IF NOT EXISTS \"Message\" (\"id\"  SERIAL , \"chatId\" UUID NOT NULL REFERENCES \"Chat\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE, \"userId\" INTEGER REFERENCES \"User\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"role\" \"public\".\"enum_Message_role\" NOT NULL, \"content\" TEXT NOT NULL, \"model\" VARCHAR(50), \"tokens\" INTEGER DEFAULT 0, \"isEdited\" BOOLEAN DEFAULT false, \"editedAt\" TIMESTAMP WITH TIME ZONE, \"parentMessageId\" INTEGER REFERENCES \"Messages\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"feedback\" \"public\".\"enum_Message_feedback\", \"metadata\" JSON DEFAULT '{}', \"attachments\" JSON DEFAULT '[]', \"createdAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"updatedAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"deletedAt\" TIMESTAMP WITH TIME ZONE, PRIMARY KEY (\"id\"));"
  },
  "original": "[Circular Reference]",
  "sql": "CREATE TABLE IF NOT EXISTS \"Message\" (\"id\"  SERIAL , \"chatId\" UUID NOT NULL REFERENCES \"Chat\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE, \"userId\" INTEGER REFERENCES \"User\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"role\" \"public\".\"enum_Message_role\" NOT NULL, \"content\" TEXT NOT NULL, \"model\" VARCHAR(50), \"tokens\" INTEGER DEFAULT 0, \"isEdited\" BOOLEAN DEFAULT false, \"editedAt\" TIMESTAMP WITH TIME ZONE, \"parentMessageId\" INTEGER REFERENCES \"Messages\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"feedback\" \"public\".\"enum_Message_feedback\", \"metadata\" JSON DEFAULT '{}', \"attachments\" JSON DEFAULT '[]', \"createdAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"updatedAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"deletedAt\" TIMESTAMP WITH TIME ZONE, PRIMARY KEY (\"id\"));",
  "parameters": {},
  "stack": "Error\n    at Query.run (/app/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)\n    at /app/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PostgresQueryInterface.createTable (/app/node_modules/sequelize/lib/dialects/abstract/query-interface.js:98:12)\n    at async Message.sync (/app/node_modules/sequelize/lib/model.js:942:7)\n    at async Sequelize.sync (/app/node_modules/sequelize/lib/sequelize.js:377:9)\n    at async startServer (/app/server.js:290:13)"
}
2025-10-08 23:20:37 [info]: Google Gemini provider initialized
2025-10-08 23:20:37 [info]: Hugging Face provider initialized
2025-10-08 23:20:37 [info]: Rate limiting using Redis store
2025-10-08 23:20:38 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:20:38 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:20:38 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:20:38 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:20:38 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:20:38 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:20:38 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:20:38 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:20:38 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:20:38 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:20:38 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:20:38 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:20:38 [info]: Redis connected for rate limiting
2025-10-08 23:20:38 [info]: ‚úÖ Database connection established successfully
2025-10-08 23:20:38 [info]: üì¶ Loaded models: User, Chat, Message, UserSummary
2025-10-08 23:20:38 [info]: üîÑ Syncing database with alter...
2025-10-08 23:20:39 [error]: Failed to start server: relation "Messages" does not exist {
  "name": "SequelizeDatabaseError",
  "parent": {
    "length": 106,
    "name": "error",
    "severity": "ERROR",
    "code": "42P01",
    "file": "namespace.c",
    "line": "433",
    "routine": "RangeVarGetRelidExtended",
    "sql": "CREATE TABLE IF NOT EXISTS \"Message\" (\"id\"  SERIAL , \"chatId\" UUID NOT NULL REFERENCES \"Chat\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE, \"userId\" INTEGER REFERENCES \"User\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"role\" \"public\".\"enum_Message_role\" NOT NULL, \"content\" TEXT NOT NULL, \"model\" VARCHAR(50), \"tokens\" INTEGER DEFAULT 0, \"isEdited\" BOOLEAN DEFAULT false, \"editedAt\" TIMESTAMP WITH TIME ZONE, \"parentMessageId\" INTEGER REFERENCES \"Messages\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"feedback\" \"public\".\"enum_Message_feedback\", \"metadata\" JSON DEFAULT '{}', \"attachments\" JSON DEFAULT '[]', \"createdAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"updatedAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"deletedAt\" TIMESTAMP WITH TIME ZONE, PRIMARY KEY (\"id\"));"
  },
  "original": "[Circular Reference]",
  "sql": "CREATE TABLE IF NOT EXISTS \"Message\" (\"id\"  SERIAL , \"chatId\" UUID NOT NULL REFERENCES \"Chat\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE, \"userId\" INTEGER REFERENCES \"User\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"role\" \"public\".\"enum_Message_role\" NOT NULL, \"content\" TEXT NOT NULL, \"model\" VARCHAR(50), \"tokens\" INTEGER DEFAULT 0, \"isEdited\" BOOLEAN DEFAULT false, \"editedAt\" TIMESTAMP WITH TIME ZONE, \"parentMessageId\" INTEGER REFERENCES \"Messages\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"feedback\" \"public\".\"enum_Message_feedback\", \"metadata\" JSON DEFAULT '{}', \"attachments\" JSON DEFAULT '[]', \"createdAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"updatedAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"deletedAt\" TIMESTAMP WITH TIME ZONE, PRIMARY KEY (\"id\"));",
  "parameters": {},
  "stack": "Error\n    at Query.run (/app/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)\n    at /app/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PostgresQueryInterface.createTable (/app/node_modules/sequelize/lib/dialects/abstract/query-interface.js:98:12)\n    at async Message.sync (/app/node_modules/sequelize/lib/model.js:942:7)\n    at async Sequelize.sync (/app/node_modules/sequelize/lib/sequelize.js:377:9)\n    at async startServer (/app/server.js:290:13)"
}
2025-10-08 23:20:42 [info]: Google Gemini provider initialized
2025-10-08 23:20:42 [info]: Hugging Face provider initialized
2025-10-08 23:20:42 [info]: Rate limiting using Redis store
2025-10-08 23:20:43 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:20:43 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:20:43 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:20:43 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:20:43 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:20:43 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:20:43 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:20:43 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:20:43 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:20:43 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:20:43 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:20:43 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:20:43 [info]: Redis connected for rate limiting
2025-10-08 23:20:43 [info]: ‚úÖ Database connection established successfully
2025-10-08 23:20:43 [info]: üì¶ Loaded models: User, Chat, Message, UserSummary
2025-10-08 23:20:43 [info]: üîÑ Syncing database with alter...
2025-10-08 23:20:46 [error]: Failed to start server: relation "Messages" does not exist {
  "name": "SequelizeDatabaseError",
  "parent": {
    "length": 106,
    "name": "error",
    "severity": "ERROR",
    "code": "42P01",
    "file": "namespace.c",
    "line": "433",
    "routine": "RangeVarGetRelidExtended",
    "sql": "CREATE TABLE IF NOT EXISTS \"Message\" (\"id\"  SERIAL , \"chatId\" UUID NOT NULL REFERENCES \"Chat\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE, \"userId\" INTEGER REFERENCES \"User\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"role\" \"public\".\"enum_Message_role\" NOT NULL, \"content\" TEXT NOT NULL, \"model\" VARCHAR(50), \"tokens\" INTEGER DEFAULT 0, \"isEdited\" BOOLEAN DEFAULT false, \"editedAt\" TIMESTAMP WITH TIME ZONE, \"parentMessageId\" INTEGER REFERENCES \"Messages\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"feedback\" \"public\".\"enum_Message_feedback\", \"metadata\" JSON DEFAULT '{}', \"attachments\" JSON DEFAULT '[]', \"createdAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"updatedAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"deletedAt\" TIMESTAMP WITH TIME ZONE, PRIMARY KEY (\"id\"));"
  },
  "original": "[Circular Reference]",
  "sql": "CREATE TABLE IF NOT EXISTS \"Message\" (\"id\"  SERIAL , \"chatId\" UUID NOT NULL REFERENCES \"Chat\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE, \"userId\" INTEGER REFERENCES \"User\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"role\" \"public\".\"enum_Message_role\" NOT NULL, \"content\" TEXT NOT NULL, \"model\" VARCHAR(50), \"tokens\" INTEGER DEFAULT 0, \"isEdited\" BOOLEAN DEFAULT false, \"editedAt\" TIMESTAMP WITH TIME ZONE, \"parentMessageId\" INTEGER REFERENCES \"Messages\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"feedback\" \"public\".\"enum_Message_feedback\", \"metadata\" JSON DEFAULT '{}', \"attachments\" JSON DEFAULT '[]', \"createdAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"updatedAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"deletedAt\" TIMESTAMP WITH TIME ZONE, PRIMARY KEY (\"id\"));",
  "parameters": {},
  "stack": "Error\n    at Query.run (/app/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)\n    at /app/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PostgresQueryInterface.createTable (/app/node_modules/sequelize/lib/dialects/abstract/query-interface.js:98:12)\n    at async Message.sync (/app/node_modules/sequelize/lib/model.js:942:7)\n    at async Sequelize.sync (/app/node_modules/sequelize/lib/sequelize.js:377:9)\n    at async startServer (/app/server.js:290:13)"
}
2025-10-08 23:20:52 [info]: Google Gemini provider initialized
2025-10-08 23:20:52 [info]: Hugging Face provider initialized
2025-10-08 23:20:52 [info]: Rate limiting using Redis store
2025-10-08 23:20:52 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:20:52 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:20:52 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:20:52 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:20:52 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:20:52 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:20:52 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:20:52 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:20:52 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:20:52 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:20:52 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:20:52 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:20:52 [info]: Redis connected for rate limiting
2025-10-08 23:20:52 [info]: ‚úÖ Database connection established successfully
2025-10-08 23:20:52 [info]: üì¶ Loaded models: User, Chat, Message, UserSummary
2025-10-08 23:20:52 [info]: üîÑ Syncing database with alter...
2025-10-08 23:20:53 [error]: Failed to start server: relation "Messages" does not exist {
  "name": "SequelizeDatabaseError",
  "parent": {
    "length": 106,
    "name": "error",
    "severity": "ERROR",
    "code": "42P01",
    "file": "namespace.c",
    "line": "433",
    "routine": "RangeVarGetRelidExtended",
    "sql": "CREATE TABLE IF NOT EXISTS \"Message\" (\"id\"  SERIAL , \"chatId\" UUID NOT NULL REFERENCES \"Chat\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE, \"userId\" INTEGER REFERENCES \"User\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"role\" \"public\".\"enum_Message_role\" NOT NULL, \"content\" TEXT NOT NULL, \"model\" VARCHAR(50), \"tokens\" INTEGER DEFAULT 0, \"isEdited\" BOOLEAN DEFAULT false, \"editedAt\" TIMESTAMP WITH TIME ZONE, \"parentMessageId\" INTEGER REFERENCES \"Messages\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"feedback\" \"public\".\"enum_Message_feedback\", \"metadata\" JSON DEFAULT '{}', \"attachments\" JSON DEFAULT '[]', \"createdAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"updatedAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"deletedAt\" TIMESTAMP WITH TIME ZONE, PRIMARY KEY (\"id\"));"
  },
  "original": "[Circular Reference]",
  "sql": "CREATE TABLE IF NOT EXISTS \"Message\" (\"id\"  SERIAL , \"chatId\" UUID NOT NULL REFERENCES \"Chat\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE, \"userId\" INTEGER REFERENCES \"User\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"role\" \"public\".\"enum_Message_role\" NOT NULL, \"content\" TEXT NOT NULL, \"model\" VARCHAR(50), \"tokens\" INTEGER DEFAULT 0, \"isEdited\" BOOLEAN DEFAULT false, \"editedAt\" TIMESTAMP WITH TIME ZONE, \"parentMessageId\" INTEGER REFERENCES \"Messages\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"feedback\" \"public\".\"enum_Message_feedback\", \"metadata\" JSON DEFAULT '{}', \"attachments\" JSON DEFAULT '[]', \"createdAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"updatedAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"deletedAt\" TIMESTAMP WITH TIME ZONE, PRIMARY KEY (\"id\"));",
  "parameters": {},
  "stack": "Error\n    at Query.run (/app/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)\n    at /app/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PostgresQueryInterface.createTable (/app/node_modules/sequelize/lib/dialects/abstract/query-interface.js:98:12)\n    at async Message.sync (/app/node_modules/sequelize/lib/model.js:942:7)\n    at async Sequelize.sync (/app/node_modules/sequelize/lib/sequelize.js:377:9)\n    at async startServer (/app/server.js:290:13)"
}
2025-10-08 23:20:57 [info]: Google Gemini provider initialized
2025-10-08 23:20:57 [info]: Hugging Face provider initialized
2025-10-08 23:20:57 [info]: Rate limiting using Redis store
2025-10-08 23:20:57 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:20:57 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:20:57 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:20:57 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:20:57 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:20:57 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:20:57 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:20:57 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:20:57 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:20:57 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:20:57 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:20:57 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:20:57 [info]: Redis connected for rate limiting
2025-10-08 23:20:57 [info]: ‚úÖ Database connection established successfully
2025-10-08 23:20:57 [info]: üì¶ Loaded models: User, Chat, Message, UserSummary
2025-10-08 23:20:57 [info]: üîÑ Syncing database with alter...
2025-10-08 23:20:58 [error]: Failed to start server: relation "Messages" does not exist {
  "name": "SequelizeDatabaseError",
  "parent": {
    "length": 106,
    "name": "error",
    "severity": "ERROR",
    "code": "42P01",
    "file": "namespace.c",
    "line": "433",
    "routine": "RangeVarGetRelidExtended",
    "sql": "CREATE TABLE IF NOT EXISTS \"Message\" (\"id\"  SERIAL , \"chatId\" UUID NOT NULL REFERENCES \"Chat\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE, \"userId\" INTEGER REFERENCES \"User\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"role\" \"public\".\"enum_Message_role\" NOT NULL, \"content\" TEXT NOT NULL, \"model\" VARCHAR(50), \"tokens\" INTEGER DEFAULT 0, \"isEdited\" BOOLEAN DEFAULT false, \"editedAt\" TIMESTAMP WITH TIME ZONE, \"parentMessageId\" INTEGER REFERENCES \"Messages\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"feedback\" \"public\".\"enum_Message_feedback\", \"metadata\" JSON DEFAULT '{}', \"attachments\" JSON DEFAULT '[]', \"createdAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"updatedAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"deletedAt\" TIMESTAMP WITH TIME ZONE, PRIMARY KEY (\"id\"));"
  },
  "original": "[Circular Reference]",
  "sql": "CREATE TABLE IF NOT EXISTS \"Message\" (\"id\"  SERIAL , \"chatId\" UUID NOT NULL REFERENCES \"Chat\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE, \"userId\" INTEGER REFERENCES \"User\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"role\" \"public\".\"enum_Message_role\" NOT NULL, \"content\" TEXT NOT NULL, \"model\" VARCHAR(50), \"tokens\" INTEGER DEFAULT 0, \"isEdited\" BOOLEAN DEFAULT false, \"editedAt\" TIMESTAMP WITH TIME ZONE, \"parentMessageId\" INTEGER REFERENCES \"Messages\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"feedback\" \"public\".\"enum_Message_feedback\", \"metadata\" JSON DEFAULT '{}', \"attachments\" JSON DEFAULT '[]', \"createdAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"updatedAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"deletedAt\" TIMESTAMP WITH TIME ZONE, PRIMARY KEY (\"id\"));",
  "parameters": {},
  "stack": "Error\n    at Query.run (/app/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)\n    at /app/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PostgresQueryInterface.createTable (/app/node_modules/sequelize/lib/dialects/abstract/query-interface.js:98:12)\n    at async Message.sync (/app/node_modules/sequelize/lib/model.js:942:7)\n    at async Sequelize.sync (/app/node_modules/sequelize/lib/sequelize.js:377:9)\n    at async startServer (/app/server.js:290:13)"
}
2025-10-08 23:21:02 [info]: Google Gemini provider initialized
2025-10-08 23:21:02 [info]: Hugging Face provider initialized
2025-10-08 23:21:02 [info]: Rate limiting using Redis store
2025-10-08 23:21:02 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:21:02 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:21:02 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:21:02 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:21:02 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:21:02 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:21:02 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:21:02 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:21:02 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:21:02 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:21:02 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:21:02 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:21:02 [info]: Redis connected for rate limiting
2025-10-08 23:21:03 [info]: ‚úÖ Database connection established successfully
2025-10-08 23:21:03 [info]: üì¶ Loaded models: User, Chat, Message, UserSummary
2025-10-08 23:21:03 [info]: üîÑ Syncing database with alter...
2025-10-08 23:21:03 [error]: Failed to start server: relation "Messages" does not exist {
  "name": "SequelizeDatabaseError",
  "parent": {
    "length": 106,
    "name": "error",
    "severity": "ERROR",
    "code": "42P01",
    "file": "namespace.c",
    "line": "433",
    "routine": "RangeVarGetRelidExtended",
    "sql": "CREATE TABLE IF NOT EXISTS \"Message\" (\"id\"  SERIAL , \"chatId\" UUID NOT NULL REFERENCES \"Chat\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE, \"userId\" INTEGER REFERENCES \"User\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"role\" \"public\".\"enum_Message_role\" NOT NULL, \"content\" TEXT NOT NULL, \"model\" VARCHAR(50), \"tokens\" INTEGER DEFAULT 0, \"isEdited\" BOOLEAN DEFAULT false, \"editedAt\" TIMESTAMP WITH TIME ZONE, \"parentMessageId\" INTEGER REFERENCES \"Messages\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"feedback\" \"public\".\"enum_Message_feedback\", \"metadata\" JSON DEFAULT '{}', \"attachments\" JSON DEFAULT '[]', \"createdAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"updatedAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"deletedAt\" TIMESTAMP WITH TIME ZONE, PRIMARY KEY (\"id\"));"
  },
  "original": "[Circular Reference]",
  "sql": "CREATE TABLE IF NOT EXISTS \"Message\" (\"id\"  SERIAL , \"chatId\" UUID NOT NULL REFERENCES \"Chat\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE, \"userId\" INTEGER REFERENCES \"User\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"role\" \"public\".\"enum_Message_role\" NOT NULL, \"content\" TEXT NOT NULL, \"model\" VARCHAR(50), \"tokens\" INTEGER DEFAULT 0, \"isEdited\" BOOLEAN DEFAULT false, \"editedAt\" TIMESTAMP WITH TIME ZONE, \"parentMessageId\" INTEGER REFERENCES \"Messages\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"feedback\" \"public\".\"enum_Message_feedback\", \"metadata\" JSON DEFAULT '{}', \"attachments\" JSON DEFAULT '[]', \"createdAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"updatedAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"deletedAt\" TIMESTAMP WITH TIME ZONE, PRIMARY KEY (\"id\"));",
  "parameters": {},
  "stack": "Error\n    at Query.run (/app/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)\n    at /app/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PostgresQueryInterface.createTable (/app/node_modules/sequelize/lib/dialects/abstract/query-interface.js:98:12)\n    at async Message.sync (/app/node_modules/sequelize/lib/model.js:942:7)\n    at async Sequelize.sync (/app/node_modules/sequelize/lib/sequelize.js:377:9)\n    at async startServer (/app/server.js:290:13)"
}
2025-10-08 23:21:09 [info]: Google Gemini provider initialized
2025-10-08 23:21:09 [info]: Hugging Face provider initialized
2025-10-08 23:21:09 [info]: Rate limiting using Redis store
2025-10-08 23:21:09 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:21:09 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:21:09 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:21:09 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:21:09 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:21:09 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:21:09 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:21:09 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:21:09 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:21:09 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:21:09 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:21:09 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:21:09 [info]: Redis connected for rate limiting
2025-10-08 23:21:09 [info]: ‚úÖ Database connection established successfully
2025-10-08 23:21:09 [info]: üì¶ Loaded models: User, Chat, Message, UserSummary
2025-10-08 23:21:09 [info]: üîÑ Syncing database with alter...
2025-10-08 23:21:10 [error]: Failed to start server: relation "Messages" does not exist {
  "name": "SequelizeDatabaseError",
  "parent": {
    "length": 106,
    "name": "error",
    "severity": "ERROR",
    "code": "42P01",
    "file": "namespace.c",
    "line": "433",
    "routine": "RangeVarGetRelidExtended",
    "sql": "CREATE TABLE IF NOT EXISTS \"Message\" (\"id\"  SERIAL , \"chatId\" UUID NOT NULL REFERENCES \"Chat\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE, \"userId\" INTEGER REFERENCES \"User\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"role\" \"public\".\"enum_Message_role\" NOT NULL, \"content\" TEXT NOT NULL, \"model\" VARCHAR(50), \"tokens\" INTEGER DEFAULT 0, \"isEdited\" BOOLEAN DEFAULT false, \"editedAt\" TIMESTAMP WITH TIME ZONE, \"parentMessageId\" INTEGER REFERENCES \"Messages\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"feedback\" \"public\".\"enum_Message_feedback\", \"metadata\" JSON DEFAULT '{}', \"attachments\" JSON DEFAULT '[]', \"createdAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"updatedAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"deletedAt\" TIMESTAMP WITH TIME ZONE, PRIMARY KEY (\"id\"));"
  },
  "original": "[Circular Reference]",
  "sql": "CREATE TABLE IF NOT EXISTS \"Message\" (\"id\"  SERIAL , \"chatId\" UUID NOT NULL REFERENCES \"Chat\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE, \"userId\" INTEGER REFERENCES \"User\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"role\" \"public\".\"enum_Message_role\" NOT NULL, \"content\" TEXT NOT NULL, \"model\" VARCHAR(50), \"tokens\" INTEGER DEFAULT 0, \"isEdited\" BOOLEAN DEFAULT false, \"editedAt\" TIMESTAMP WITH TIME ZONE, \"parentMessageId\" INTEGER REFERENCES \"Messages\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"feedback\" \"public\".\"enum_Message_feedback\", \"metadata\" JSON DEFAULT '{}', \"attachments\" JSON DEFAULT '[]', \"createdAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"updatedAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"deletedAt\" TIMESTAMP WITH TIME ZONE, PRIMARY KEY (\"id\"));",
  "parameters": {},
  "stack": "Error\n    at Query.run (/app/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)\n    at /app/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PostgresQueryInterface.createTable (/app/node_modules/sequelize/lib/dialects/abstract/query-interface.js:98:12)\n    at async Message.sync (/app/node_modules/sequelize/lib/model.js:942:7)\n    at async Sequelize.sync (/app/node_modules/sequelize/lib/sequelize.js:377:9)\n    at async startServer (/app/server.js:290:13)"
}
2025-10-08 23:21:19 [info]: Google Gemini provider initialized
2025-10-08 23:21:19 [info]: Hugging Face provider initialized
2025-10-08 23:21:19 [info]: Rate limiting using Redis store
2025-10-08 23:21:19 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:21:19 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:21:19 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:21:19 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:21:19 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:21:19 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:21:19 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:21:19 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:21:19 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:21:19 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:21:19 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:21:19 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:21:19 [info]: Redis connected for rate limiting
2025-10-08 23:21:19 [info]: ‚úÖ Database connection established successfully
2025-10-08 23:21:19 [info]: üì¶ Loaded models: User, Chat, Message, UserSummary
2025-10-08 23:21:19 [info]: üîÑ Syncing database with alter...
2025-10-08 23:21:20 [error]: Failed to start server: relation "Messages" does not exist {
  "name": "SequelizeDatabaseError",
  "parent": {
    "length": 106,
    "name": "error",
    "severity": "ERROR",
    "code": "42P01",
    "file": "namespace.c",
    "line": "433",
    "routine": "RangeVarGetRelidExtended",
    "sql": "CREATE TABLE IF NOT EXISTS \"Message\" (\"id\"  SERIAL , \"chatId\" UUID NOT NULL REFERENCES \"Chat\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE, \"userId\" INTEGER REFERENCES \"User\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"role\" \"public\".\"enum_Message_role\" NOT NULL, \"content\" TEXT NOT NULL, \"model\" VARCHAR(50), \"tokens\" INTEGER DEFAULT 0, \"isEdited\" BOOLEAN DEFAULT false, \"editedAt\" TIMESTAMP WITH TIME ZONE, \"parentMessageId\" INTEGER REFERENCES \"Messages\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"feedback\" \"public\".\"enum_Message_feedback\", \"metadata\" JSON DEFAULT '{}', \"attachments\" JSON DEFAULT '[]', \"createdAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"updatedAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"deletedAt\" TIMESTAMP WITH TIME ZONE, PRIMARY KEY (\"id\"));"
  },
  "original": "[Circular Reference]",
  "sql": "CREATE TABLE IF NOT EXISTS \"Message\" (\"id\"  SERIAL , \"chatId\" UUID NOT NULL REFERENCES \"Chat\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE, \"userId\" INTEGER REFERENCES \"User\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"role\" \"public\".\"enum_Message_role\" NOT NULL, \"content\" TEXT NOT NULL, \"model\" VARCHAR(50), \"tokens\" INTEGER DEFAULT 0, \"isEdited\" BOOLEAN DEFAULT false, \"editedAt\" TIMESTAMP WITH TIME ZONE, \"parentMessageId\" INTEGER REFERENCES \"Messages\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"feedback\" \"public\".\"enum_Message_feedback\", \"metadata\" JSON DEFAULT '{}', \"attachments\" JSON DEFAULT '[]', \"createdAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"updatedAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"deletedAt\" TIMESTAMP WITH TIME ZONE, PRIMARY KEY (\"id\"));",
  "parameters": {},
  "stack": "Error\n    at Query.run (/app/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)\n    at /app/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PostgresQueryInterface.createTable (/app/node_modules/sequelize/lib/dialects/abstract/query-interface.js:98:12)\n    at async Message.sync (/app/node_modules/sequelize/lib/model.js:942:7)\n    at async Sequelize.sync (/app/node_modules/sequelize/lib/sequelize.js:377:9)\n    at async startServer (/app/server.js:290:13)"
}
2025-10-08 23:21:35 [info]: Google Gemini provider initialized
2025-10-08 23:21:35 [info]: Hugging Face provider initialized
2025-10-08 23:21:35 [info]: Rate limiting using Redis store
2025-10-08 23:21:35 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:21:35 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:21:35 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:21:35 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:21:35 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:21:35 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:21:35 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:21:35 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:21:35 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:21:35 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:21:35 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:21:35 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:21:35 [info]: Redis connected for rate limiting
2025-10-08 23:21:35 [info]: ‚úÖ Database connection established successfully
2025-10-08 23:21:35 [info]: üì¶ Loaded models: User, Chat, Message, UserSummary
2025-10-08 23:21:35 [info]: üîÑ Syncing database with alter...
2025-10-08 23:21:36 [error]: Failed to start server: relation "Messages" does not exist {
  "name": "SequelizeDatabaseError",
  "parent": {
    "length": 106,
    "name": "error",
    "severity": "ERROR",
    "code": "42P01",
    "file": "namespace.c",
    "line": "433",
    "routine": "RangeVarGetRelidExtended",
    "sql": "CREATE TABLE IF NOT EXISTS \"Message\" (\"id\"  SERIAL , \"chatId\" UUID NOT NULL REFERENCES \"Chat\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE, \"userId\" INTEGER REFERENCES \"User\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"role\" \"public\".\"enum_Message_role\" NOT NULL, \"content\" TEXT NOT NULL, \"model\" VARCHAR(50), \"tokens\" INTEGER DEFAULT 0, \"isEdited\" BOOLEAN DEFAULT false, \"editedAt\" TIMESTAMP WITH TIME ZONE, \"parentMessageId\" INTEGER REFERENCES \"Messages\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"feedback\" \"public\".\"enum_Message_feedback\", \"metadata\" JSON DEFAULT '{}', \"attachments\" JSON DEFAULT '[]', \"createdAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"updatedAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"deletedAt\" TIMESTAMP WITH TIME ZONE, PRIMARY KEY (\"id\"));"
  },
  "original": "[Circular Reference]",
  "sql": "CREATE TABLE IF NOT EXISTS \"Message\" (\"id\"  SERIAL , \"chatId\" UUID NOT NULL REFERENCES \"Chat\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE, \"userId\" INTEGER REFERENCES \"User\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"role\" \"public\".\"enum_Message_role\" NOT NULL, \"content\" TEXT NOT NULL, \"model\" VARCHAR(50), \"tokens\" INTEGER DEFAULT 0, \"isEdited\" BOOLEAN DEFAULT false, \"editedAt\" TIMESTAMP WITH TIME ZONE, \"parentMessageId\" INTEGER REFERENCES \"Messages\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"feedback\" \"public\".\"enum_Message_feedback\", \"metadata\" JSON DEFAULT '{}', \"attachments\" JSON DEFAULT '[]', \"createdAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"updatedAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"deletedAt\" TIMESTAMP WITH TIME ZONE, PRIMARY KEY (\"id\"));",
  "parameters": {},
  "stack": "Error\n    at Query.run (/app/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)\n    at /app/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PostgresQueryInterface.createTable (/app/node_modules/sequelize/lib/dialects/abstract/query-interface.js:98:12)\n    at async Message.sync (/app/node_modules/sequelize/lib/model.js:942:7)\n    at async Sequelize.sync (/app/node_modules/sequelize/lib/sequelize.js:377:9)\n    at async startServer (/app/server.js:290:13)"
}
2025-10-08 23:22:04 [info]: Google Gemini provider initialized
2025-10-08 23:22:04 [info]: Hugging Face provider initialized
2025-10-08 23:22:04 [info]: Rate limiting using Redis store
2025-10-08 23:22:04 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:22:04 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:22:04 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:22:04 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:22:04 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:22:04 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:22:04 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:22:04 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:22:04 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:22:04 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:22:04 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:22:04 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:22:04 [info]: Redis connected for rate limiting
2025-10-08 23:22:04 [info]: ‚úÖ Database connection established successfully
2025-10-08 23:22:04 [info]: üì¶ Loaded models: User, Chat, Message, UserSummary
2025-10-08 23:22:04 [info]: üîÑ Syncing database with alter...
2025-10-08 23:22:05 [error]: Failed to start server: relation "Messages" does not exist {
  "name": "SequelizeDatabaseError",
  "parent": {
    "length": 106,
    "name": "error",
    "severity": "ERROR",
    "code": "42P01",
    "file": "namespace.c",
    "line": "433",
    "routine": "RangeVarGetRelidExtended",
    "sql": "CREATE TABLE IF NOT EXISTS \"Message\" (\"id\"  SERIAL , \"chatId\" UUID NOT NULL REFERENCES \"Chat\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE, \"userId\" INTEGER REFERENCES \"User\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"role\" \"public\".\"enum_Message_role\" NOT NULL, \"content\" TEXT NOT NULL, \"model\" VARCHAR(50), \"tokens\" INTEGER DEFAULT 0, \"isEdited\" BOOLEAN DEFAULT false, \"editedAt\" TIMESTAMP WITH TIME ZONE, \"parentMessageId\" INTEGER REFERENCES \"Messages\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"feedback\" \"public\".\"enum_Message_feedback\", \"metadata\" JSON DEFAULT '{}', \"attachments\" JSON DEFAULT '[]', \"createdAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"updatedAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"deletedAt\" TIMESTAMP WITH TIME ZONE, PRIMARY KEY (\"id\"));"
  },
  "original": "[Circular Reference]",
  "sql": "CREATE TABLE IF NOT EXISTS \"Message\" (\"id\"  SERIAL , \"chatId\" UUID NOT NULL REFERENCES \"Chat\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE, \"userId\" INTEGER REFERENCES \"User\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"role\" \"public\".\"enum_Message_role\" NOT NULL, \"content\" TEXT NOT NULL, \"model\" VARCHAR(50), \"tokens\" INTEGER DEFAULT 0, \"isEdited\" BOOLEAN DEFAULT false, \"editedAt\" TIMESTAMP WITH TIME ZONE, \"parentMessageId\" INTEGER REFERENCES \"Messages\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"feedback\" \"public\".\"enum_Message_feedback\", \"metadata\" JSON DEFAULT '{}', \"attachments\" JSON DEFAULT '[]', \"createdAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"updatedAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"deletedAt\" TIMESTAMP WITH TIME ZONE, PRIMARY KEY (\"id\"));",
  "parameters": {},
  "stack": "Error\n    at Query.run (/app/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)\n    at /app/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PostgresQueryInterface.createTable (/app/node_modules/sequelize/lib/dialects/abstract/query-interface.js:98:12)\n    at async Message.sync (/app/node_modules/sequelize/lib/model.js:942:7)\n    at async Sequelize.sync (/app/node_modules/sequelize/lib/sequelize.js:377:9)\n    at async startServer (/app/server.js:290:13)"
}
2025-10-08 23:22:58 [info]: Google Gemini provider initialized
2025-10-08 23:22:58 [info]: Hugging Face provider initialized
2025-10-08 23:22:58 [info]: Rate limiting using Redis store
2025-10-08 23:22:58 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:22:58 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:22:58 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:22:58 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:22:58 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:22:58 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:22:58 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:22:58 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:22:58 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:22:58 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:22:58 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:22:58 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:22:58 [info]: Redis connected for rate limiting
2025-10-08 23:22:58 [info]: ‚úÖ Database connection established successfully
2025-10-08 23:22:58 [info]: üì¶ Loaded models: User, Chat, Message, UserSummary
2025-10-08 23:22:58 [info]: üîÑ Syncing database with alter...
2025-10-08 23:22:59 [error]: Failed to start server: relation "Messages" does not exist {
  "name": "SequelizeDatabaseError",
  "parent": {
    "length": 106,
    "name": "error",
    "severity": "ERROR",
    "code": "42P01",
    "file": "namespace.c",
    "line": "433",
    "routine": "RangeVarGetRelidExtended",
    "sql": "CREATE TABLE IF NOT EXISTS \"Message\" (\"id\"  SERIAL , \"chatId\" UUID NOT NULL REFERENCES \"Chat\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE, \"userId\" INTEGER REFERENCES \"User\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"role\" \"public\".\"enum_Message_role\" NOT NULL, \"content\" TEXT NOT NULL, \"model\" VARCHAR(50), \"tokens\" INTEGER DEFAULT 0, \"isEdited\" BOOLEAN DEFAULT false, \"editedAt\" TIMESTAMP WITH TIME ZONE, \"parentMessageId\" INTEGER REFERENCES \"Messages\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"feedback\" \"public\".\"enum_Message_feedback\", \"metadata\" JSON DEFAULT '{}', \"attachments\" JSON DEFAULT '[]', \"createdAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"updatedAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"deletedAt\" TIMESTAMP WITH TIME ZONE, PRIMARY KEY (\"id\"));"
  },
  "original": "[Circular Reference]",
  "sql": "CREATE TABLE IF NOT EXISTS \"Message\" (\"id\"  SERIAL , \"chatId\" UUID NOT NULL REFERENCES \"Chat\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE, \"userId\" INTEGER REFERENCES \"User\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"role\" \"public\".\"enum_Message_role\" NOT NULL, \"content\" TEXT NOT NULL, \"model\" VARCHAR(50), \"tokens\" INTEGER DEFAULT 0, \"isEdited\" BOOLEAN DEFAULT false, \"editedAt\" TIMESTAMP WITH TIME ZONE, \"parentMessageId\" INTEGER REFERENCES \"Messages\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"feedback\" \"public\".\"enum_Message_feedback\", \"metadata\" JSON DEFAULT '{}', \"attachments\" JSON DEFAULT '[]', \"createdAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"updatedAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"deletedAt\" TIMESTAMP WITH TIME ZONE, PRIMARY KEY (\"id\"));",
  "parameters": {},
  "stack": "Error\n    at Query.run (/app/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)\n    at /app/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PostgresQueryInterface.createTable (/app/node_modules/sequelize/lib/dialects/abstract/query-interface.js:98:12)\n    at async Message.sync (/app/node_modules/sequelize/lib/model.js:942:7)\n    at async Sequelize.sync (/app/node_modules/sequelize/lib/sequelize.js:377:9)\n    at async startServer (/app/server.js:290:13)"
}
2025-10-08 23:24:01 [info]: Google Gemini provider initialized
2025-10-08 23:24:01 [info]: Hugging Face provider initialized
2025-10-08 23:24:01 [info]: Rate limiting using Redis store
2025-10-08 23:24:01 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:24:01 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:24:01 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:24:01 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:24:01 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:24:01 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:24:01 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:24:01 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:24:01 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:24:01 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:24:01 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:24:01 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:24:01 [info]: Redis connected for rate limiting
2025-10-08 23:24:01 [info]: ‚úÖ Database connection established successfully
2025-10-08 23:24:01 [info]: üì¶ Loaded models: User, Chat, Message, UserSummary
2025-10-08 23:24:01 [info]: üîÑ Syncing database with alter...
2025-10-08 23:24:02 [error]: Failed to start server: relation "Messages" does not exist {
  "name": "SequelizeDatabaseError",
  "parent": {
    "length": 106,
    "name": "error",
    "severity": "ERROR",
    "code": "42P01",
    "file": "namespace.c",
    "line": "433",
    "routine": "RangeVarGetRelidExtended",
    "sql": "CREATE TABLE IF NOT EXISTS \"Message\" (\"id\"  SERIAL , \"chatId\" UUID NOT NULL REFERENCES \"Chat\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE, \"userId\" INTEGER REFERENCES \"User\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"role\" \"public\".\"enum_Message_role\" NOT NULL, \"content\" TEXT NOT NULL, \"model\" VARCHAR(50), \"tokens\" INTEGER DEFAULT 0, \"isEdited\" BOOLEAN DEFAULT false, \"editedAt\" TIMESTAMP WITH TIME ZONE, \"parentMessageId\" INTEGER REFERENCES \"Messages\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"feedback\" \"public\".\"enum_Message_feedback\", \"metadata\" JSON DEFAULT '{}', \"attachments\" JSON DEFAULT '[]', \"createdAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"updatedAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"deletedAt\" TIMESTAMP WITH TIME ZONE, PRIMARY KEY (\"id\"));"
  },
  "original": "[Circular Reference]",
  "sql": "CREATE TABLE IF NOT EXISTS \"Message\" (\"id\"  SERIAL , \"chatId\" UUID NOT NULL REFERENCES \"Chat\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE, \"userId\" INTEGER REFERENCES \"User\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"role\" \"public\".\"enum_Message_role\" NOT NULL, \"content\" TEXT NOT NULL, \"model\" VARCHAR(50), \"tokens\" INTEGER DEFAULT 0, \"isEdited\" BOOLEAN DEFAULT false, \"editedAt\" TIMESTAMP WITH TIME ZONE, \"parentMessageId\" INTEGER REFERENCES \"Messages\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"feedback\" \"public\".\"enum_Message_feedback\", \"metadata\" JSON DEFAULT '{}', \"attachments\" JSON DEFAULT '[]', \"createdAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"updatedAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"deletedAt\" TIMESTAMP WITH TIME ZONE, PRIMARY KEY (\"id\"));",
  "parameters": {},
  "stack": "Error\n    at Query.run (/app/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)\n    at /app/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PostgresQueryInterface.createTable (/app/node_modules/sequelize/lib/dialects/abstract/query-interface.js:98:12)\n    at async Message.sync (/app/node_modules/sequelize/lib/model.js:942:7)\n    at async Sequelize.sync (/app/node_modules/sequelize/lib/sequelize.js:377:9)\n    at async startServer (/app/server.js:290:13)"
}
2025-10-08 23:25:05 [info]: Google Gemini provider initialized
2025-10-08 23:25:05 [info]: Hugging Face provider initialized
2025-10-08 23:25:05 [info]: Rate limiting using Redis store
2025-10-08 23:25:05 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:25:05 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:25:05 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:25:05 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:25:05 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:25:05 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:25:05 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:25:05 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:25:05 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:25:05 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:25:05 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:25:05 [error]: Unhandled Rejection at: {
  "0": "r",
  "1": "e",
  "2": "a",
  "3": "s",
  "4": "o",
  "5": "n",
  "6": ":"
}
2025-10-08 23:25:05 [info]: Redis connected for rate limiting
2025-10-08 23:25:05 [info]: ‚úÖ Database connection established successfully
2025-10-08 23:25:05 [info]: üì¶ Loaded models: User, Chat, Message, UserSummary
2025-10-08 23:25:05 [info]: üîÑ Syncing database with alter...
2025-10-08 23:25:06 [error]: Failed to start server: relation "Messages" does not exist {
  "name": "SequelizeDatabaseError",
  "parent": {
    "length": 106,
    "name": "error",
    "severity": "ERROR",
    "code": "42P01",
    "file": "namespace.c",
    "line": "433",
    "routine": "RangeVarGetRelidExtended",
    "sql": "CREATE TABLE IF NOT EXISTS \"Message\" (\"id\"  SERIAL , \"chatId\" UUID NOT NULL REFERENCES \"Chat\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE, \"userId\" INTEGER REFERENCES \"User\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"role\" \"public\".\"enum_Message_role\" NOT NULL, \"content\" TEXT NOT NULL, \"model\" VARCHAR(50), \"tokens\" INTEGER DEFAULT 0, \"isEdited\" BOOLEAN DEFAULT false, \"editedAt\" TIMESTAMP WITH TIME ZONE, \"parentMessageId\" INTEGER REFERENCES \"Messages\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"feedback\" \"public\".\"enum_Message_feedback\", \"metadata\" JSON DEFAULT '{}', \"attachments\" JSON DEFAULT '[]', \"createdAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"updatedAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"deletedAt\" TIMESTAMP WITH TIME ZONE, PRIMARY KEY (\"id\"));"
  },
  "original": "[Circular Reference]",
  "sql": "CREATE TABLE IF NOT EXISTS \"Message\" (\"id\"  SERIAL , \"chatId\" UUID NOT NULL REFERENCES \"Chat\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE, \"userId\" INTEGER REFERENCES \"User\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"role\" \"public\".\"enum_Message_role\" NOT NULL, \"content\" TEXT NOT NULL, \"model\" VARCHAR(50), \"tokens\" INTEGER DEFAULT 0, \"isEdited\" BOOLEAN DEFAULT false, \"editedAt\" TIMESTAMP WITH TIME ZONE, \"parentMessageId\" INTEGER REFERENCES \"Messages\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE, \"feedback\" \"public\".\"enum_Message_feedback\", \"metadata\" JSON DEFAULT '{}', \"attachments\" JSON DEFAULT '[]', \"createdAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"updatedAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"deletedAt\" TIMESTAMP WITH TIME ZONE, PRIMARY KEY (\"id\"));",
  "parameters": {},
  "stack": "Error\n    at Query.run (/app/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)\n    at /app/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PostgresQueryInterface.createTable (/app/node_modules/sequelize/lib/dialects/abstract/query-interface.js:98:12)\n    at async Message.sync (/app/node_modules/sequelize/lib/model.js:942:7)\n    at async Sequelize.sync (/app/node_modules/sequelize/lib/sequelize.js:377:9)\n    at async startServer (/app/server.js:290:13)"
}
